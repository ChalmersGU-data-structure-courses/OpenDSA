window.onload=()=>{wrapCodeWithSnippets();const e=addCodeSnippetSupport();for(var t=0;t<e;t++){const e="tv"+t,n="treeView"+t;document.getElementById(e).addEventListener("click",(()=>{"none"==document.getElementById(n).style.display?toggleTreeViewOn(e):toggleTreeViewOff(e)}))}};const addCodeSnippetSupport=()=>{const e=document.getElementsByClassName("codeSnippet");return Array.from(e).forEach(((e,t)=>{e.classList.contains("highlight")?addCodeSnippetSupportSingleLang(e,t):addCodeSnippetSupportMultiLang(e,t)})),e.length},addCodeSnippetSupportSingleLang=(e,t)=>{const n=parseJavaToTokens(e.textContent),s=buildParseTree(n),a=document.createElement("div");a.classList.add("row"),a.classList.add("align-items-center");const d=document.createElement("div");d.classList.add("col-md-12"),d.classList.add("code-snippet");const o=document.createElement("div");o.id=`treeView${t}`,o.style.display="none",o.innerHTML=s,a.appendChild(d),a.appendChild(o);const l=document.createElement("button");l.id=`tv${t}`,l.textContent="Toggle Tree View",l.classList.add("btn"),l.classList.add("btn-primary");const c=document.createElement("div");c.appendChild(l),e.parentElement.appendChild(a),d.appendChild(c),d.appendChild(e)},addCodeSnippetSupportMultiLang=(e,t)=>{const n=e.getElementsByTagName("a");Array.from(n).forEach(((e,n)=>{0==n?e.addEventListener("click",(()=>{showTreeViewAndButton(`tv${t}`,`treeView${t}`)})):e.addEventListener("click",(()=>{hideTreeViewAndButton(`tv${t}`)}))}));const s=e.getElementsByClassName("highlight")[0],a=parseJavaToTokens(s.textContent),d=buildParseTree(a),o=document.createElement("div");o.classList.add("row"),o.classList.add("align-items-center");const l=document.createElement("div");l.classList.add("col-md-12"),l.classList.add("code-snippet");const c=document.createElement("div");c.id=`treeView${t}`,c.style.display="none",c.innerHTML=d,o.appendChild(l),o.appendChild(c);const i=document.createElement("button");i.id=`tv${t}`,i.textContent="Toggle Tree View",i.classList.add("btn"),i.classList.add("btn-primary"),i.style.float="right",e.getElementsByTagName("ul")[0].appendChild(i),e.parentElement.appendChild(o),l.appendChild(e)},toggleTreeViewOn=e=>{const t=document.getElementById(e).closest(".row").getElementsByClassName("code-snippet")[0];t.classList.remove("col-md-12"),t.classList.add("col-md-6");const n=`treeView${e.replaceAll(/[^0-9]/g,"")}`;document.getElementById(n).style.display="",document.getElementById(n).classList.add("col-md-6")},hideTreeViewAndButton=e=>{document.getElementById(e).style.display="none",toggleTreeViewOff(e)},showTreeViewAndButton=(e,t)=>{document.getElementById(e).style.display="";"none"!=document.getElementById(t).style.display&&toggleTreeViewOn(e)},toggleTreeViewOff=e=>{const t=document.getElementById(e).closest(".row").getElementsByClassName("code-snippet")[0];t.classList.remove("col-md-6"),t.classList.add("col-md-12");const n=`treeView${e.replaceAll(/[^0-9]/g,"")}`;document.getElementById(n).classList.remove("col-md-6"),document.getElementById(n).style.display="none"},tokenList=[{ID:"Annotation",Regex:/^@[^\s\/]*/g},{ID:"Comment",Regex:/^\/\/.*/g},{ID:"Comment",Regex:/^\/\*+[^\/]*\*\//g},{ID:"Right Brace",Regex:/^}/g},{ID:"Loop",Regex:/^(for|while)\s*\([^{]*{/g},{ID:"If",Regex:/^if\s*\([^{]*{/g},{ID:"Else",Regex:/^else\s*{/g},{ID:"Else If",Regex:/^else\s+if\s*\([^{]*{/g},{ID:"Try",Regex:/^try[^{]*{/g},{ID:"Catch",Regex:/^catch[^{]*{/g},{ID:"Interface",Regex:/^(public\s+|)\s*interface[^{]*{/g},{ID:"Class",Regex:/^((public|private|protected|)\s+|)(static\s+|)(abstract\s+|)class\s+[^{]*{/g},{ID:"Code Block",Regex:/^[A-z]*\s*\([^;\n{]*;/g},{ID:"Switch",Regex:/^switch[^{]*{/g},{ID:"Case",Regex:/^case\s*[^:]*:/g},{ID:"Default Case",Regex:/^default\s*[^:]*:/g},{ID:"Method",Regex:/^((public|private|protected|)\s+|static|)\s*(static\s+|)\s*(<.*>\s+|)\s*((void|byte|long|short|double|int|float|boolean|char|([A-Z][A-z\<\>]*)\s+)|)\s*\w*\s*\([^;{]*[;{]/g},{ID:"Code Block",Regex:/^[^;]*;/g}],getAllCodeBlocks=()=>{const e=/^\w*_code$/g,t=document.querySelectorAll("*[id]"),n=Array.from(t).filter((t=>t.id.match(e))),s=document.getElementsByClassName("highlight"),a=Array.from(s).filter((t=>!t.parentNode.parentNode.parentNode.id.match(e)&&!t.parentNode.classList.contains("highlight-guess")));return n.concat(a)},wrapCodeWithSnippets=()=>{getAllCodeBlocks().forEach((e=>{const t=wrap(e);t.wrapper.classList.add("codeWrapper"),t.self.classList.add("codeSnippet")}))},wrap=e=>{const t=e.parentNode,n=t.childNodes,s=Array.from(n).findIndex((t=>t==e)),a=document.createElement("div");if(s>=n.length)a.appendChild(e),t.appendChild(a);else{const d=n[s+1];a.appendChild(e),t.insertBefore(a,d)}return{wrapper:a,self:e}},parseJavaToTokens=(e,t=[])=>{const n=e.trim().replace(/^\n/,"");if(""==n)return t;const s=tokenList.map((e=>{const t=n.match(e.Regex);return null!=t&&0!=t.length?{ID:e.ID,Match:t[0]}:null})).filter((e=>null!=e)),a=s.length>=1?s[0]:null,d=((e,t)=>{if(null==t||"Comment"==t.ID)return e;if("Code Block"!=t.ID||"Code Block"!=(e.length>0?e[e.length-1].ID:""))return e.concat(t);{const n=e[e.length-1].Match.concat(t.Match);return e.slice(0,e.length-1).concat({ID:e[e.length-1].ID,Match:n})}})(t,a);return parseJavaToTokens(n.substring(a.Match.length),d)},buildParseTree=e=>{const t=(e,n=0,s=[],a={defaultFound:!1,firstCaseFound:!1,switchHeight:-1})=>{if(0==e.length)return s;const d=e[0],o=("Right Brace"==d.ID&&1==a.defaultFound&&a.switchHeight,"Case"!=d.ID&&"Default Case"!=d.ID||!a.firstCaseFound?"Right Brace"==d.ID&&1==a.defaultFound&&a.switchHeight+2==n?n-1:n:n-1),l=((e,t,n)=>"Right Brace"!=e.ID?"Comment"==e.ID||"Code Block"==e.ID?n.concat([`${new Array(2*t).join(" ")}<span>H${t} | ${e.ID}</span>\n`]):n.concat([`${new Array(2*t).join(" ")}<span>H${t} | ${e.ID}: ${e.Match.replace(/{/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"")}</span>\n`]):n)(d,o,s),c="Right Brace"!=d.ID||1!=a.defaultFound||a.switchHeight-2!=n?{firstCaseFound:a.firstCaseFound||"Case"==d.ID,defaultFound:a.defaultFound||"Default Case"==d.ID,switchHeight:"Switch"==d.ID?o:a.switchHeight}:{firstCaseFound:!1,defaultFound:!1,switchHeight:-1},i="Comment"==d.ID||"Code Block"==d.ID||"Right Brace"==d.ID||"Method"==d.ID&&null!=d.Match.match(/;/g)||"Annotation"==d.ID?"Right Brace"==d.ID?o-1:o:o+1;return t(e.slice(1),i,l,c)},n=t(e);return"<pre>".concat(n.join("")).concat("</pre>")};
