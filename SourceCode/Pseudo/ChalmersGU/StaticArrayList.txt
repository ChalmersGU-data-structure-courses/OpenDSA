
/* *** ODSATag: StaticArrayList *** */
/* *** ODSATag: StaticArrayListInit *** */
class StaticArrayList(E) implements List(E)
    private internalArray : E[]
    private listSize      : int

    StaticArrayList(capacity:int)
        internalArray = new array of size capacity
        listSize = 0
/* *** ODSAendTag: StaticArrayListInit *** */

/* *** ODSATag: StaticArrayListGetSet *** */
    // Precondition: 0 <= i < listSize
    get(i:int) : E
        return internalArray[i]

    // Precondition: 0 <= i < listSize
    set(i:int, x:E) : E
        old : E = internalArray[i]
        internalArray[i] = x
        return old
/* *** ODSAendTag: StaticArrayListGetSet *** */

/* *** ODSATag: StaticArrayListAdd *** */
    // Precondition: 0 <= i <= listSize, and listSize < size of internalArray
    add(i:int, x:E)
        listSize += 1
        for k in listSize-1, listSize-2, ..., i+1
            internalArray[k] = internalArray[k-1]
        internalArray[i] = x
/* *** ODSAendTag: StaticArrayListAdd *** */

/* *** ODSATag: StaticArrayListRemove *** */
    // Precondition: 0 <= i < listSize, and listSize > 0
    remove(i:int) : E
        x : E = internalArray[i]
        for k in i+1, i+2, ..., listSize-1
            internalArray[k] = internalArray[k+1]
        listSize -= 1
        internalArray[listSize] = null   // For garbage collection
        return x
/* *** ODSAendTag: StaticArrayListRemove *** */

    isEmpty() : boolean
        return listSize == 0

    size() : int
        return listSize

    iterator() : Iterator(E)
        return an iterator over the elements in internalArray
/* *** ODSAendTag: StaticArrayList *** */
