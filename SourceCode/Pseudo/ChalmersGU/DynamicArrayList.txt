
/* *** ODSATag: DynamicArrayList *** */
/* *** ODSATag: DynamicArrayListInit *** */
class DynamicArrayList(E) implements List(E)
    private internalArray : E[]
    private listSize      : int

    DynamicArrayList()
        internalArray = new array of size 1
        listSize = 0
/* *** ODSAendTag: DynamicArrayListInit *** */

    get(i:int) : E
        make sure that 0 <= i < size of internalArray
        return internalArray[i]

    set(i:int, x:E) : E
        make sure that 0 <= i < size of internalArray
        old : E = internalArray[i]
        internalArray[i] = x
        return old

/* *** ODSATag: DynamicArrayListAdd *** */
    add(i:int, x:E)
        make sure that 0 <= i <= size of internalArray
        if listSize >= size of internalArray
            resizeArray(2 * size of internalArray)
        listSize += 1
        for k in listSize-1, listSize-2, ..., i+1
            internalArray[k] = internalArray[k-1]
        internalArray[i] = x
/* *** ODSAendTag: DynamicArrayListAdd *** */

/* *** ODSATag: DynamicArrayListRemove *** */
    remove(i:int) : E
        make sure that the size of internalArray > 0
        make sure that 0 <= i < size of internalArray
        x : E = internalArray[i]
        for k in i+1, i+2, ..., listSize-1
            internalArray[k] = internalArray[k+1]
        listSize -= 1
        internalArray[listSize] = null   // For garbage collection
        if listSize < size of internalArray / 3
            resizeArray(size of internalArray / 2)
        return x
/* *** ODSAendTag: DynamicArrayListRemove *** */

/* *** ODSATag: DynamicArrayListResize *** */
    private resizeArray(newCapacity:int)
        newArray : E[] = new array of size newCapacity
        for i in 0, 1, ..., listSize-1
            newArray[i] = internalArray[i]
        internalArray = newArray
/* *** ODSAendTag: DynamicArrayListResize *** */

    isEmpty() : boolean
        return listSize == 0

    size() : int
        return listSize

/* *** ODSATag: DynamicArrayListIterator *** */
    iterator() : Iterator(E)
        return an iterator over the elements in internalArray
/* *** ODSAendTag: DynamicArrayListIterator *** */
/* *** ODSAendTag: DynamicArrayList *** */
