
/* *** ODSATag: DynamicArrayStack *** */
/* *** ODSATag: DynamicArrayStackInit *** */
class DynamicArrayStack(E) implements Stack(E)
    private internalArray : E[]
    private top           : int

    DynamicArrayStack()
        internalArray = new array of size 1
        top = 0
/* *** ODSAendTag: DynamicArrayStackInit *** */

/* *** ODSATag: DynamicArrayStackPush *** */
    push(x:E)
        if top >= size of internalArray
            resizeArray(2 * size of internalArray)
        internalArray[top] = x
        top += 1
/* *** ODSAendTag: DynamicArrayStackPush *** */

/* *** ODSATag: DynamicArrayStackPeek *** */
    // Precondition: top > 0
    peek() : E
        return internalArray[top-1]
/* *** ODSAendTag: DynamicArrayStackPeek *** */

/* *** ODSATag: DynamicArrayStackPop *** */
    // Precondition: top > 0
    pop() : E
        top -= 1
        x : E = internalArray[top]
        internalArray[top] = null   // For garbage collection
        if top < size of internalArray / 3
            resizeArray(size of internalArray / 2)
        return x
/* *** ODSAendTag: DynamicArrayStackPop *** */

/* *** ODSATag: DynamicArrayStackResize *** */
    private resizeArray(newCapacity:int)
        newArray : E[] = new array of size newCapacity
        for i in 0, 1, ..., top-1
            newArray[i] = internalArray[i]
        internalArray = newArray
/* *** ODSAendTag: DynamicArrayStackResize *** */

    isEmpty() : boolean
        return top == 0

    size() : int
        return top

/* *** ODSATag: DynamicArrayStackIterator *** */
    iterator() : Iterator(E)
        return an iterator over the elements in internalArray
/* *** ODSAendTag: DynamicArrayStackIterator *** */
/* *** ODSAendTag: DynamicArrayStack *** */
