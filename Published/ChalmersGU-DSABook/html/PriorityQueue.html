
<!DOCTYPE html>




<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>8.1. Priority queues (WORK IN PROGRESS) &mdash; Data Structures and Algorithms</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/normalize.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/JSAV.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaMOD-min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/jquery.ui.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaStyle-min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/accessibility.css" type="text/css" />
    
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": {
        scale: "80"
      }
    });
  </script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="index" title="Data Structures and Algorithms" href="index.html" />
    <link rel="next" title="2. Array Implementation for Complete Binary Trees (WORK IN PROGRESS)" href="CompleteTree.html" />
    <link rel="prev" title="9. Binary Search Tree Chapter Summary (WORK IN PROGRESS)" href="BSTChapSumm.html" />

  </head>

  <body>


      <div class="header">
        
  
      <script type="text/javascript" src="../../../lib/jquery.min.js"></script>
      <script type="text/javascript" src="../../../lib/jquery.migrate.min.js"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/localforage/1.9.0/localforage.min.js"></script>
      <script type="text/javascript" src="../../../lib/accessibility.js"></script>
    <script type="text/javascript" src="../../../lib/jquery.ui.min.js"></script>
    <script type="text/javascript" src="../../../lib/jquery.transit.js"></script>
    <script type="text/javascript" src="../../../lib/raphael.js"></script>
    <script type="text/javascript" src="../../../lib/JSAV-min.js"></script>
    <script type="text/javascript" src="_static/config.js"></script>
    <script type="text/javascript" src="../../../lib/timeme-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaUtils-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaMOD-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
    <script type="text/javascript" src="https://d3js.org/d3-selection-multi.v1.min.js"></script>
    <script type="text/javascript" src="../../../lib/dataStructures.js"></script>
    <script type="text/javascript" src="../../../lib/conceptMap.js"></script>

        
<a id="username-link" style="float:right;color:red;margin:10px 20px auto; display: none" class="username-link" href="Gradebook.html"></a>
<a id="login-link" style="float:right;color:red;margin:10px 20px auto" class="login-link" href="#"><Macro 'login'></a>
<div id="login-box" class="login-popup">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <label class="username">
        <span>Username</span>
        <input id="username" value="" type="text" autocomplete="on" placeholder="Username" tabindex="1">
      </label>
      <label class="password">
        <span>Password</span>
        <input id="password" value="" type="password" placeholder="Password" tabindex="2">
        <span><a id="forgot" href="#">Forgot your password?</a></span>
      </label>

      <p>
        <input type="submit" id="login-submit-button" value="Sign in" tabindex="3" />
      </p>
      <p>
        <input type="button" id="register-button" value="Register" tabindex="4" />
      </p>
    </fieldset>
  </form>
</div>

        
<a id="registration-link" style="float:right;color:red;margin:10px 20px auto" class="registration-link" href="#">Register</a>
<div id="registration-box" class="registration-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <div id="register_error" class="error"></div>
      <label class="username">
        <span>Username:</span>
        <input type="text" id="user" placeholder="Username" />
      </label>

      <label class="password">
        <span>Password</span>
        <input id="pass" type="password" placeholder="Password" />
      </label>

      <label class="password">
        <span>Confirm Password</span>
        <input id="rpass" type="password" placeholder="Confirm Password" />
      </label>

      <label class="email">
        <span>Email:</span>
        <input type="text" id="email" placeholder="Email">
      </label>

      <p>
        <input type="submit" id="register-submit-button" value="Register &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>
<img class="leftlogo" src="_static/OpenDSALogoT64.png" alt="Logo"/><div class="title-wrapper">
          <div class="title-inbetween" style="display: table-cell; vertical-align: middle;">
            <div class="title-content">
              <h1 class="heading" ><a href="index.html">
                <span>Data Structures and Algorithms</span></a></h1>
              <h2 class="heading" ><span>Chapter 8 Priority Queues</span></h2>
            </div>
          </div>
        </div>
      </div>
      <div class="topnav">
        <p>
            <a style="float:left;color:blue;" href="../source/PriorityQueue.rst.rst"
              target="_blank" rel="nofollow">Show Source | </a>&#160;&#160;
            <a class="abt" style="float:left;color:blue;" href="#" rel="nofollow">| About</a>&#160;&#160;

          
        «&#160;&#160;<a id="prevmod" href="BSTChapSumm.html">7.<span class="section-number">9. </span>Binary Search Tree Chapter Summary (WORK IN PROGRESS)</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod" href="CompleteTree.html">8.<span class="section-number">2. </span>Array Implementation for Complete Binary Trees (WORK IN PROGRESS)</a>&#160;&#160;»


        </p>
      </div>
       
      <div class="content">
        
  <script>ODSA.SETTINGS.MODULE_SECTIONS = ['priority-queues', 'sorting', 'finding-the-top-100-items'];</script><script>ODSA.SETTINGS.DISP_MOD_COMP = true;ODSA.SETTINGS.MODULE_NAME = "PriorityQueue";ODSA.SETTINGS.MODULE_LONG_NAME = "Priority queues (WORK IN PROGRESS)";ODSA.SETTINGS.MODULE_CHAPTER = "Priority Queues"; ODSA.SETTINGS.BUILD_DATE = "2021-11-06 19:40:18"; ODSA.SETTINGS.BUILD_CMAP = true;JSAV_OPTIONS['lang']='en';JSAV_EXERCISE_OPTIONS['code']='pseudo';</script><div class="section" id="priority-queues-work-in-progress">
<h1>8.<span class="section-number">1. </span>Priority queues (WORK IN PROGRESS)<a class="headerlink" href="#priority-queues-work-in-progress" title="Permalink to this headline">¶</a></h1>
<div class="section" id="priority-queues">
<h2>8.<span class="section-number">1.1. </span>Priority queues<a class="headerlink" href="#priority-queues" title="Permalink to this headline">¶</a></h2>
<p>So far we have seen two <a class="reference internal" href="Glossary.html#term-adt"><span class="xref std std-term">ADTs</span></a> that represent a collection
of objects, and support adding and removing objects:</p>
<ul class="simple">
<li><p><a class="reference internal" href="Glossary.html#term-stack"><span class="xref std std-term">Stacks</span></a>, where the object removed is always the one
<em>most recently</em> inserted (<a class="reference internal" href="Glossary.html#term-lifo"><span class="xref std std-term">LIFO</span></a>).</p></li>
<li><p><a class="reference internal" href="Glossary.html#term-queue"><span class="xref std std-term">Queues</span></a>, where the object removed is always the one
<em>first</em> inserted (<a class="reference internal" href="Glossary.html#term-fifo"><span class="xref std std-term">FIFO</span></a>).</p></li>
</ul>
<p>There are many situations, both in real life and in computing
applications, where we wish to choose the next “most important”
from a collection of people, tasks, or objects.
For example, doctors in a hospital emergency room often choose to see
next the “most critical” patient rather than the one who arrived
first.
When scheduling programs for execution in a multitasking
operating system, at any given moment there might be several programs
(usually called <a class="reference internal" href="Glossary.html#term-job"><span class="xref std std-term">jobs</span></a>) ready to run.
The next job selected is the one with the highest
<a class="reference internal" href="Glossary.html#term-priority"><span class="xref std std-term">priority</span></a>.
Priority is indicated by a particular value associated with the job
(and might change while the job remains in the wait list).</p>
<p>When a collection of objects is organized by importance or priority,
we call this a <a class="reference internal" href="Glossary.html#term-priority-queue"><span class="xref std std-term">priority queue</span></a>. A priority queue supports the
following operations:</p>
<ul class="simple">
<li><p>adding a new object to the priority queue</p></li>
<li><p>removing the <em>smallest</em> object from the priority queue.</p></li>
</ul>
<p>In this chapter, we will see how to implement a priority queue so that
both adding and removing the minimum take <span class="math notranslate nohighlight">\(O(\log n)\)</span> time.</p>
<div id="API_PriorityQueueADT_code"><ul><li><a href="#API_PriorityQueueADT_code_Pseudo">Pseudo-Code</a></li><li><a href="#API_PriorityQueueADT_code_Java_Generic">Java</a></li><li><a href="#API_PriorityQueueADT_code_Python">Python</a></li></ul><div id="API_PriorityQueueADT_code_Pseudo"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">interface</span> <span class="nf">PriorityQueue</span><span class="p">(</span><span class="n">E</span><span class="p">)</span> <span class="kd">extends</span> <span class="nf">Collection</span><span class="p">(</span><span class="n">E</span><span class="p">)</span>
    <span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="n">E</span><span class="p">)</span>          <span class="c1">// Adds x to the priority queue.</span>
    <span class="n">removeMin</span><span class="p">()</span> <span class="p">:</span> <span class="n">E</span>   <span class="c1">// Removes and returns the minimum element. Raises an exception if the priority queue is empty.</span>
    <span class="n">getMin</span><span class="p">()</span>    <span class="p">:</span> <span class="n">E</span>   <span class="c1">// Returns the minimum element, without removing it.  Raises an exception if the priority queue is empty.</span>
    <span class="c1">// Note: iterator() can yield the elements in any order, but the minimum element should come first.</span>
</pre></div>
</div>
</div><div id="API_PriorityQueueADT_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Note: This is an interface, while java.util.PriorityQueue is a class</span>
<span class="c1">// implementing the Queue interface (so different method names)!</span>
<span class="kd">interface</span> <span class="nc">PriorityQueue</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="n">E</span> <span class="n">x</span><span class="p">);</span>  <span class="c1">// Adds x to the priority queue.</span>
    <span class="n">E</span> <span class="nf">removeMin</span><span class="p">();</span>  <span class="c1">// Removes and returns the minimum element. Raises an exception if the priority queue is empty.</span>
    <span class="n">E</span> <span class="nf">getMin</span><span class="p">();</span>     <span class="c1">// Returns the minimum element, without removing it. Raises an exception if the priority queue is empty.</span>
    <span class="c1">// Note: iterator() can yield the elements in any order, but the minimum element should come first.</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div id="API_PriorityQueueADT_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PriorityQueue</span><span class="p">(</span><span class="n">Collection</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>    <span class="s2">&quot;&quot;&quot;Adds x to the priority queue.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">removeMin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="s2">&quot;&quot;&quot;Removes and returns the minimum element. Raises an exception if the priority queue is empty.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">getMin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>    <span class="s2">&quot;&quot;&quot;Returns the minimum element, without removing it. Raises an exception if the priority queue is empty.&quot;&quot;&quot;</span>
    <span class="c1"># Note: __iter__() can yield the elements in any order, but the minimum element should come first.</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#API_PriorityQueueADT_code" ).tabs();});</script><a id="todo0"></a><div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Add max priority queues, and the version with an explicit priority
(and/or comparator?)</p>
</div>
<p>Now let’s look at a couple of applications of priority queues.</p>
</div>
<div class="section" id="sorting">
<h2>8.<span class="section-number">1.2. </span>Sorting<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h2>
<p>We can use a priority queue to make an efficient sorting algorithm. To
sort a list of items:</p>
<ul class="simple">
<li><p>First create an empty priority queue, and add all the items to it.</p></li>
<li><p>Then repeatedly find and remove the smallest item. The items will
come out in ascending order.</p></li>
</ul>
<p>Here is an implementation of this algorithm in code:</p>
<div id="PQsort_PQsort_code"><ul><li><a href="#PQsort_PQsort_code_Pseudo">Pseudo-Code</a></li><li><a href="#PQsort_PQsort_code_Java_Generic">Java</a></li><li><a href="#PQsort_PQsort_code_Python">Python</a></li></ul><div id="PQsort_PQsort_code_Pseudo"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">pqsort</span><span class="p">(</span><span class="n">array</span><span class="p">:</span> <span class="n">T</span><span class="o">[]</span><span class="p">):</span> <span class="n">T</span><span class="o">[]</span>
  <span class="n">pq</span> <span class="o">=</span> <span class="n">MinHeap</span><span class="p">()</span>
    <span class="c1">// MinHeap is a class that implements the</span>
    <span class="c1">//  priority queue ADT; we will see how it works</span>
    <span class="c1">// in the next section.</span>
  <span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="n">array</span>
    <span class="n">pq</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

  <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">array</span> <span class="n">of</span> <span class="n">length</span> <span class="s">&quot;array.length&quot;</span>
  <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="mf">0.</span><span class="p">.</span><span class="na">result</span><span class="p">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">result</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="na">removeMin</span><span class="p">()</span>
    
  <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div><div id="PQsort_PQsort_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">T</span><span class="o">[]</span> <span class="nf">pqsort</span><span class="p">(</span><span class="n">T</span><span class="o">[]</span> <span class="n">array</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">PriorityQueue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">pq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MinHeap</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="c1">// MinHeap is a class that implements the</span>
    <span class="c1">// priority queue ADT; we will see how it works</span>
    <span class="c1">// in the next section.</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">:</span> <span class="n">array</span><span class="p">)</span>
    <span class="n">pq</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>

  <span class="n">T</span><span class="o">[]</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">T</span><span class="o">[</span><span class="n">array</span><span class="p">.</span><span class="na">length</span><span class="o">]</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">result</span><span class="p">.</span><span class="na">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="n">result</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="na">removeMin</span><span class="p">();</span>

  <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div id="PQsort_PQsort_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pqsort</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
  <span class="n">pq</span> <span class="o">=</span> <span class="n">MinHeap</span><span class="p">()</span>
    <span class="c1"># MinHeap is a class that implements the</span>
    <span class="c1"># priority queue ADT; we will see how it works</span>
    <span class="c1"># in the next section.</span>
  <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">array</span><span class="p">:</span>
    <span class="n">pq</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

  <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">while</span> <span class="ow">not</span> <span class="n">pq</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">():</span>
    <span class="n">result</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pq</span><span class="o">.</span><span class="n">removeMin</span><span class="p">())</span>
    
  <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#PQsort_PQsort_code" ).tabs();});</script><p>What is the time complexity of this algorithm? Well, for an input list
of size <span class="math notranslate nohighlight">\(n\)</span>, the algorithm calls <code class="docutils literal notranslate"><span class="pre">add</span></code> <span class="math notranslate nohighlight">\(n\)</span> times and
<code class="docutils literal notranslate"><span class="pre">removeMin</span></code> <span class="math notranslate nohighlight">\(n\)</span> times.  In a binary heap, <code class="docutils literal notranslate"><span class="pre">add</span></code> and
<code class="docutils literal notranslate"><span class="pre">removeMin</span></code> both take <span class="math notranslate nohighlight">\(O(\log n)\)</span> time.  Therefore, the total
runtime is <span class="math notranslate nohighlight">\(O(n \log n)\)</span> – as efficient as any of the sorting
algorithms we have seen so far!</p>
</div>
<div class="section" id="finding-the-top-100-items">
<h2>8.<span class="section-number">1.3. </span>Finding the top 100 items<a class="headerlink" href="#finding-the-top-100-items" title="Permalink to this headline">¶</a></h2>
<p>Suppose that we are running a bank. Every day, every transaction that
occurs at the bank is recorded in a list. When the bank closes at the
end of the day, we would like to find the 100 highest-valued
transactions from that day. How can we do it?</p>
<p>One way is to use sorting. If we store the transactions in an array
and sort it by value, then the highest-value transactions will be at
the end of the array. If there are <em>n</em> transactions in total, then
transactions number <span class="math notranslate nohighlight">\(n-100\ldots n-1\)</span> are the ones we need. If
we use an efficient sorting algorithm, this will take
<span class="math notranslate nohighlight">\(O(n \log n)\)</span> time. (More generally, this gives us an algorithm
for finding the largest <span class="math notranslate nohighlight">\(k\)</span> items in a list of <span class="math notranslate nohighlight">\(n\)</span> items, in
<span class="math notranslate nohighlight">\(O(n \log n)\)</span> time.)</p>
<p>Now suppose that we want to monitor the transactions <em>throughout</em> the
day. At any point, we want to be able to find the 100 highest-valued
transactions <em>so far</em> today. How can we do this?</p>
<p>We could still use the sorting approach, but we would need to sort the
list of transactions <em>every time</em> we wanted to find the 100 top
transactions. This may be prohibitively expensive if there are a lot
of transactions: it takes <span class="math notranslate nohighlight">\(O(n \log n)\)</span> time every time we do it.</p>
<p>We can do better with the help of a priority queue. The idea is to
have a priority queue that holds the <em>100 highest-value transactions</em>
only. Whenever a new transaction comes in, we need to update the
priority queue accordingly:</p>
<ol class="arabic simple">
<li><p>If the priority queue has fewer than 100 transactions (i.e. there
have been fewer than 100 transactions so far today), then add the
new transaction to the priority queue.</p></li>
<li><p>Otherwise, if the new transaction is <em>greater in value than the
lowest-valued of the top 100 transactions</em>, then remove that
transaction and add the new transaction.</p></li>
<li><p>Otherwise, don’t add the new transaction to the priority queue
(it’s not in the top 100).</p></li>
</ol>
<p>Notice that in step 2, we are comparing the new transaction to the
<em>lowest-valued</em> of the top 100 transactions – if the transactions
are ordered by value, then this transaction can be found by calling
<code class="docutils literal notranslate"><span class="pre">getMin</span></code>, and removed using <code class="docutils literal notranslate"><span class="pre">removeMin</span></code>. So this algorithm can
be implemented efficiently using a priority queue.</p>
<p>In fact, we can simplify these three steps into two steps. First, we
add the new transaction to the priority queue. This might make the
priority queue grow to 101 transactions. If so, we remove the
lowest-valued transaction. Here it is in code:</p>
<div id="OnlineTopK_OnlineTopK_code"><ul><li><a href="#OnlineTopK_OnlineTopK_code_Pseudo">Pseudo-Code</a></li><li><a href="#OnlineTopK_OnlineTopK_code_Java_Generic">Java</a></li><li><a href="#OnlineTopK_OnlineTopK_code_Python">Python</a></li></ul><div id="OnlineTopK_OnlineTopK_code_Pseudo"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Top100Transactions</span>
    <span class="c1">// Assume that the Transaction class implements comparisons</span>
    <span class="c1">// by comparing the value of the transaction.</span>
    <span class="kd">private</span> <span class="nf">PriorityQueue</span><span class="p">(</span><span class="n">Transaction</span><span class="p">)</span> <span class="n">pq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MinHeap</span><span class="p">()</span>

    <span class="c1">// Add a new transaction to the priority queue.</span>
    <span class="kd">public</span> <span class="nf">add</span><span class="p">(</span><span class="n">transaction</span><span class="p">:</span> <span class="n">Transaction</span><span class="p">):</span>
        <span class="n">pq</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
        <span class="c1">// If the priority queue grows to 101 transactions,</span>
        <span class="c1">// cut it down to 100 by removing the smallest-valued one.</span>
        <span class="k">if</span> <span class="n">pq</span><span class="p">.</span><span class="na">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">100</span>
            <span class="n">pq</span><span class="p">.</span><span class="na">removeMin</span><span class="p">()</span>

    <span class="c1">// Return the top 100 transactions.</span>
    <span class="n">top100</span><span class="p">():</span> <span class="n">Iterator</span><span class="p">(</span><span class="n">Transaction</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pq</span><span class="p">.</span><span class="na">iterator</span><span class="p">()</span>
</pre></div>
</div>
</div><div id="OnlineTopK_OnlineTopK_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">Top100Transactions</span> <span class="p">{</span>
    <span class="c1">// Assume that the Transaction class implements Comparable</span>
    <span class="c1">// by comparing the value of the transaction.</span>
    <span class="kd">private</span> <span class="n">PriorityQueue</span><span class="o">&lt;</span><span class="n">Transaction</span><span class="o">&gt;</span> <span class="n">pq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MinHeap</span><span class="o">&lt;&gt;</span><span class="p">();</span>

    <span class="c1">// Add a new transaction to the priority queue.</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="n">Transaction</span> <span class="n">transaction</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">pq</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">transaction</span><span class="p">);</span>
        <span class="c1">// If the priority queue grows to 101 transactions,</span>
        <span class="c1">// cut it down to 100 by removing the smallest-valued one.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">pq</span><span class="p">.</span><span class="na">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span>
            <span class="n">pq</span><span class="p">.</span><span class="na">removeMin</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// Return the top 100 transactions.</span>
    <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Transaction</span><span class="o">&gt;</span> <span class="nf">top100</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">pq</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div id="OnlineTopK_OnlineTopK_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Top100Transactions</span><span class="p">:</span>
    <span class="c1"># Assume that the Transaction class implements comparisons</span>
    <span class="c1"># by comparing the value of the transaction.</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pq</span> <span class="o">=</span> <span class="n">MinHeap</span><span class="p">()</span>

    <span class="c1"># Add a new transaction to the priority queue.</span>
    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">transaction</span><span class="p">):</span>
        <span class="n">pq</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
        <span class="c1"># If the priority queue grows to 101 transactions,</span>
        <span class="c1"># cut it down to 100 by removing the smallest-valued one.</span>
        <span class="k">if</span> <span class="n">pq</span><span class="o">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="n">pq</span><span class="o">.</span><span class="n">removeMin</span><span class="p">()</span>

    <span class="c1"># Return the top 100 transactions.</span>
    <span class="k">def</span> <span class="nf">top100</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">pq</span><span class="o">.</span><span class="n">iterator</span><span class="p">()</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#OnlineTopK_OnlineTopK_code" ).tabs();});</script><p>What is the complexity of <code class="docutils literal notranslate"><span class="pre">add</span></code>? Well, in fact it takes constant
time, because the priority queue has a constant maximum size of 100
elements. If we generalize this problem to keeping track of the top
<span class="math notranslate nohighlight">\(k\)</span> transactions, then the complexity of <code class="docutils literal notranslate"><span class="pre">add</span></code> is
<span class="math notranslate nohighlight">\(O(\log k)\)</span>.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      <p><span class="email_div" style="display:inline;"><a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a><a style="float:left;color:blue;" rel="nofollow" href="../../../lib/Privacy.html" target="_blank">| Privacy |</a> <a style="float:left;color:blue;" rel="nofollow" href="../../../lib/license.html" target="_blank">| License</a></span>&#160;&#160;
      
        «&#160;&#160;<a id="prevmod1" href="BSTChapSumm.html">7.<span class="section-number">9. </span>Binary Search Tree Chapter Summary (WORK IN PROGRESS)</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod1" href="CompleteTree.html">8.<span class="section-number">2. </span>Array Implementation for Complete Binary Trees (WORK IN PROGRESS)</a>&#160;&#160;»

</p>
      </div>
      <img style="float:right;" src="_static/nsf1.gif" height="62" width="62" alt="nsf"/>


    <div class="footer">
      <p>
        <span class="email_div" style="display:inline;">
          <a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a>
          <a id="bugreport-link" style="float:left;color:blue;" class="bugreport-link" href="#">| Report a bug</a>
        </span>
      </p>
        &copy; Copyright 2016 by OpenDSA Project Contributors and distributed under an MIT license.
      Last updated on Nov 06, 2021.
      Created using <a target="_blank" href="http://sphinx.pocoo.org/">Sphinx</a> 2.4.4.
    </div>
    
<div id="bugreport-box" class="bugreport-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="report" action="https://#">
    <fieldset class="textbox">
      <div id="bug_error" class="error"></div>
      <label>
        <span>Summary*:</span>
        <input type="text" id="b_title" placeholder="Summary" />
      </label>

      <label class="os">
        <span>Operating system*:</span>
        <select id="b_os">
          <option value="windows">Windows</option>
          <option value="macos">Mac OS</option>
          <option value="linux">Linux</option>
          <option value="ios">iOS</option>
          <option value="android">Android</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="browser">
        <span>Browser*:</span>
        <select id="b_browser">
          <option value="chrome">Chrome</option>
          <option value="safari">Safari</option>
          <option value="internetexplorer">Internet Explorer</option>
          <option value="opera">Opera</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="description">
        <span>Description*:</span><br>
        <textarea id="b_description" rows="5" cols="25" placeholder="***BUG** Please enter: (1) a consice description of the problem. (2) steps to reproduce bug. (3) the version of your browser and operating system."></textarea>
      </label>

      <label class="screenshot">
        <span>Attach a screenshot (optional):</span>
        <input type="file" id="b_screenshot" accept="image/*" placeholder="Attach a screenshot (optional)">
      </label>

      <p>
        <input type="submit" id="bug-submit-button" value="Submit &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>

  </body>
</html>