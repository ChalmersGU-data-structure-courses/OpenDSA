
<!DOCTYPE html>




<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4.4. Dynamic Array-Based Lists &mdash; Data Structures and Algorithms</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/normalize.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/JSAV.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaMOD-min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/jquery.ui.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaStyle-min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/accessibility.css" type="text/css" />
    
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": {
        scale: "80"
      }
    });
  </script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="index" title="Data Structures and Algorithms" href="index.html" />
    <link rel="next" title="5. Linked Lists" href="ListLinked.html" />
    <link rel="prev" title="3. Static Array-Based Lists" href="ListArray.html" />

  </head>

  <body>


      <div class="header">
        
  
      <script type="text/javascript" src="../../../lib/jquery.min.js"></script>
      <script type="text/javascript" src="../../../lib/jquery.migrate.min.js"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/localforage/1.9.0/localforage.min.js"></script>
      <script type="text/javascript" src="../../../lib/accessibility.js"></script>
    <script type="text/javascript" src="../../../lib/jquery.ui.min.js"></script>
    <script type="text/javascript" src="../../../lib/jquery.transit.js"></script>
    <script type="text/javascript" src="../../../lib/raphael.js"></script>
    <script type="text/javascript" src="../../../lib/JSAV-min.js"></script>
    <script type="text/javascript" src="_static/config.js"></script>
    <script type="text/javascript" src="../../../lib/timeme-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaUtils-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaMOD-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
    <script type="text/javascript" src="https://d3js.org/d3-selection-multi.v1.min.js"></script>
    <script type="text/javascript" src="../../../lib/dataStructures.js"></script>
    <script type="text/javascript" src="../../../lib/conceptMap.js"></script>

        
<a id="username-link" style="float:right;color:red;margin:10px 20px auto; display: none" class="username-link" href="Gradebook.html"></a>
<a id="login-link" style="float:right;color:red;margin:10px 20px auto" class="login-link" href="#"><Macro 'login'></a>
<div id="login-box" class="login-popup">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <label class="username">
        <span>Username</span>
        <input id="username" value="" type="text" autocomplete="on" placeholder="Username" tabindex="1">
      </label>
      <label class="password">
        <span>Password</span>
        <input id="password" value="" type="password" placeholder="Password" tabindex="2">
        <span><a id="forgot" href="#">Forgot your password?</a></span>
      </label>

      <p>
        <input type="submit" id="login-submit-button" value="Sign in" tabindex="3" />
      </p>
      <p>
        <input type="button" id="register-button" value="Register" tabindex="4" />
      </p>
    </fieldset>
  </form>
</div>

        
<a id="registration-link" style="float:right;color:red;margin:10px 20px auto" class="registration-link" href="#">Register</a>
<div id="registration-box" class="registration-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <div id="register_error" class="error"></div>
      <label class="username">
        <span>Username:</span>
        <input type="text" id="user" placeholder="Username" />
      </label>

      <label class="password">
        <span>Password</span>
        <input id="pass" type="password" placeholder="Password" />
      </label>

      <label class="password">
        <span>Confirm Password</span>
        <input id="rpass" type="password" placeholder="Confirm Password" />
      </label>

      <label class="email">
        <span>Email:</span>
        <input type="text" id="email" placeholder="Email">
      </label>

      <p>
        <input type="submit" id="register-submit-button" value="Register &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>
<img class="leftlogo" src="_static/OpenDSALogoT64.png" alt="Logo"/><div class="title-wrapper">
          <div class="title-inbetween" style="display: table-cell; vertical-align: middle;">
            <div class="title-content">
              <h1 class="heading" ><a href="index.html">
                <span>Data Structures and Algorithms</span></a></h1>
              <h2 class="heading" ><span>Chapter 4 Linear Structures</span></h2>
            </div>
          </div>
        </div>
      </div>
      <div class="topnav">
        <p>
            <a style="float:left;color:blue;" href="../source/ListArrayDynamic.rst.rst"
              target="_blank" rel="nofollow">Show Source | </a>&#160;&#160;
            <a class="abt" style="float:left;color:blue;" href="#" rel="nofollow">| About</a>&#160;&#160;

          
        «&#160;&#160;<a id="prevmod" href="ListArray.html">4.<span class="section-number">3. </span>Static Array-Based Lists</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod" href="ListLinked.html">4.<span class="section-number">5. </span>Linked Lists</a>&#160;&#160;»


        </p>
      </div>
       
      <div class="content">
        
  <script>ODSA.SETTINGS.MODULE_SECTIONS = ['resizing-the-internal-array', 'how-much-to-increase-the-array-size', 'growing-by-a-constant-amount', 'growing-by-a-constant-factor', 'constant-amount-vs-constant-factor', 'shrinking-the-internal-array', 'dynamic-array-based-list:-full-code'];</script><script>ODSA.SETTINGS.DISP_MOD_COMP = true;ODSA.SETTINGS.MODULE_NAME = "ListArrayDynamic";ODSA.SETTINGS.MODULE_LONG_NAME = "Dynamic Array-Based Lists";ODSA.SETTINGS.MODULE_CHAPTER = "Linear Structures"; ODSA.SETTINGS.BUILD_DATE = "2021-12-03 17:29:11"; ODSA.SETTINGS.BUILD_CMAP = true;JSAV_OPTIONS['lang']='en';JSAV_EXERCISE_OPTIONS['code']='pseudo';</script><link href="../../../AV/ChalmersGU/CGU-Styles.css" rel="stylesheet" type="text/css" />
<link href="../../../AV/List/ListArrayDynamicZoomCON.css" rel="stylesheet" type="text/css" />
<link href="../../../AV/List/ListArrayDynamicCON.css" rel="stylesheet" type="text/css" />
<div class="section" id="dynamic-array-based-lists">
<h1>4.<span class="section-number">4. </span>Dynamic Array-Based Lists<a class="headerlink" href="#dynamic-array-based-lists" title="Permalink to this headline">¶</a></h1>
<p>The problem with a static array-based list is that it has a limited capacity.
If we try to add new elements when the internal array is full,
the method will throw an exception.</p>
<div class="section" id="resizing-the-internal-array">
<h2>4.<span class="section-number">4.1. </span>Resizing the internal array<a class="headerlink" href="#resizing-the-internal-array" title="Permalink to this headline">¶</a></h2>
<p>How can we modify our class to allow for any number of elements?
One solution is to create a larger internal array whenever the capacity is exceeded,
and copy over all elements to the new one.</p>
<div id="DynamicArrayList_DynamicArrayListResize_code"><ul><li><a href="#DynamicArrayList_DynamicArrayListResize_code_Java_Generic">Java</a></li><li><a href="#DynamicArrayList_DynamicArrayListResize_code_Python">Python</a></li></ul><div id="DynamicArrayList_DynamicArrayListResize_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">resizeArray</span><span class="p">(</span><span class="kt">int</span> <span class="n">newCapacity</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">newCapacity</span> <span class="o">&lt;</span> <span class="n">MinCapacity</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;unchecked&quot;</span><span class="p">)</span>
        <span class="n">E</span><span class="o">[]</span> <span class="n">newArray</span> <span class="o">=</span> <span class="p">(</span><span class="n">E</span><span class="o">[]</span><span class="p">)</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">newCapacity</span><span class="o">]</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">listSize</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">newArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
        <span class="n">internalArray</span> <span class="o">=</span> <span class="n">newArray</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
</div><div id="DynamicArrayList_DynamicArrayListResize_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">_resizeArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newCapacity</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">newCapacity</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minCapacity</span><span class="p">:</span> <span class="k">return</span>
        <span class="n">newArray</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">newCapacity</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span>
            <span class="n">newArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span> <span class="o">=</span> <span class="n">newArray</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#DynamicArrayList_DynamicArrayListResize_code" ).tabs();});</script><p>So, how large should the new internal array be? For now, let’s
<strong>double the size of the internal array</strong> when we need to resize,
which means that we add the following if-clause to the <code class="docutils literal notranslate"><span class="pre">add</span></code> method:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>if listSize &gt;= size of internalArray
    resizeArray(size of internalArray * 2)
</pre></div>
</div>
<p>That’s the only difference from the <code class="docutils literal notranslate"><span class="pre">add</span></code> method from <strong>StaticArrayList</strong>.
So the dynamic <code class="docutils literal notranslate"><span class="pre">add</span></code> method will look like this.</p>
<div id="DynamicArrayList_DynamicArrayListAdd_code"><ul><li><a href="#DynamicArrayList_DynamicArrayListAdd_code_Java_Generic">Java</a></li><li><a href="#DynamicArrayList_DynamicArrayListAdd_code_Python">Python</a></li></ul><div id="DynamicArrayList_DynamicArrayListAdd_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">E</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">listSize</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IndexOutOfBoundsException</span><span class="p">(</span><span class="s">&quot;list index out of range&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">listSize</span> <span class="o">&gt;=</span> <span class="n">internalArray</span><span class="p">.</span><span class="na">length</span><span class="p">)</span>
            <span class="n">resizeArray</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">internalArray</span><span class="p">.</span><span class="na">length</span> <span class="o">*</span> <span class="n">CapacityMultiplier</span><span class="p">));</span>
        <span class="n">listSize</span><span class="o">++</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">listSize</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">k</span><span class="o">--</span><span class="p">)</span>
            <span class="n">internalArray</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span><span class="p">;</span>
        <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
</div><div id="DynamicArrayList_DynamicArrayListAdd_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;list index out of range&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_resizeArray</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacityMultiplier</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#DynamicArrayList_DynamicArrayListAdd_code" ).tabs();});</script><p>As explained below, we don’t have to double the size, but we can multiply by 3 or 1.5 or 1.1.
The important point is that we don’t add a constant number, but increase the size by a factor.
This factor is the <code class="docutils literal notranslate"><span class="pre">CapacityMultiplier</span></code> in the code above.</p>
<div id="DynamicArrayList-Append-CON" class="ssAV" data-points="0.0" data-threshold="1.0" data-type="ss" data-required="False" data-short-name="DynamicArrayList-Append-CON" data-long-name="Dynamic Array-based List Addition Slideshow" data-exer-id="" alt="Dynamic Array-based List Addition Slideshow" tabIndex="-1">
 <span class="jsavcounter"></span>
 <a class="jsavsettings" href="#">Settings</a>
 <div class="jsavcontrols"></div>
 <p class="jsavoutput jsavline"></p>
 <div class="jsavcanvas"></div>
 <div class="prof_indicators">
  <img id="DynamicArrayList-Append-CON_check_mark" class="prof_check_mark" src="_static/Images/green_check.png" alt="Proficient" />
  <span id="DynamicArrayList-Append-CON_cm_saving_msg" class="cm_saving_msg">Saving...</span>
  <span id="DynamicArrayList-Append-CON_cm_error_msg" class="cm_error_msg">
   <img id="DynamicArrayList-Append-CON_cm_warning_icon" class="cm_warning_icon" src="_static/Images/warning.png" alt="Error Saving" /><br />
   Server Error<br />
   <a href="#" class="resubmit_link">Resubmit</a>
  </span>
 </div>
</div>
<p></p>
</div>
<div class="section" id="how-much-to-increase-the-array-size">
<h2>4.<span class="section-number">4.2. </span>How much to increase the array size<a class="headerlink" href="#how-much-to-increase-the-array-size" title="Permalink to this headline">¶</a></h2>
<p>In the code above we doubled the size of the internal array whenever
we needed to resize it. But we could have done something else, like:</p>
<ul class="simple">
<li><p>Triple the size</p></li>
<li><p>Grow the size by 10%</p></li>
<li><p>Grow the size by 100 elements</p></li>
<li><p>Grow the size by 1 element</p></li>
</ul>
<p>But which is best, and why?</p>
<p>There is a tradeoff: if we grow the array by a lot, we might waste
memory. For example, immediately after we double the size, half of the
array’s capacity is unused, so we use twice as much memory as needed.
On the other hand, if we grow the array by a small amount, we need to
resize it more often.</p>
<p>We will explore these tradeoffs by looking at the performance of the
following small program under different resizing strategies:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>list = new dynamic array list
for i in 1...n:
    list.add(i)
</pre></div>
</div>
<p>The program builds a list of length <cite>n</cite> by repeatedly calling <span class="math notranslate nohighlight">\(add\)</span>.
In this case, we could have used a static array-based list of capacity
<span class="math notranslate nohighlight">\(n\)</span>. So we would like the dynamic array-based list to have
comparable performance to the static array-based list. This means that
the program ought to take <cite>linear time</cite>.</p>
<div class="section" id="growing-by-a-constant-amount">
<h3>4.<span class="section-number">4.2.1. </span>Growing by a constant amount<a class="headerlink" href="#growing-by-a-constant-amount" title="Permalink to this headline">¶</a></h3>
<p>What happens if we only grow the internal array by 1 element when we resize it?</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>if listSize &gt;= size of internalArray
    resizeArray(size of internalArray + 1)
</pre></div>
</div>
<p>Every time we call <code class="docutils literal notranslate"><span class="pre">add</span></code>, the internal array will be resized.
Resizing the array takes linear time, because if the internal array
has size <span class="math notranslate nohighlight">\(n\)</span>, it has to copy <span class="math notranslate nohighlight">\(n\)</span> elements from the
internal array to the new array. To put it another way, the loop body
<code class="docutils literal notranslate"><span class="pre">newArray[i]</span> <span class="pre">=</span> <span class="pre">internalArray[i]</span></code> will be executed <span class="math notranslate nohighlight">\(n\)</span> times.</p>
<p>Now suppose we run the program above to create a list of <span class="math notranslate nohighlight">\(n\)</span>
elements.  Adding up all the calls to <code class="docutils literal notranslate"><span class="pre">resizeArray</span></code> that happen, how
many times does an array element get copied from the internal array to
the new array (that is, how many times does the statement <code class="docutils literal notranslate"><span class="pre">newArray[i]</span>
<span class="pre">=</span> <span class="pre">internalArray[i]</span></code> get executed)?</p>
<p>The array size is initially 1, so we get the following calls to <code class="docutils literal notranslate"><span class="pre">resizeArray</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(2)</span></code>, copying 1 element</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(3)</span></code>, copying 2 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(4)</span></code>, copying 3 elements</p></li>
<li><p>…</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(n-2)</span></code>, copying <span class="math notranslate nohighlight">\(n-3\)</span> elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(n-1)</span></code>, copying <span class="math notranslate nohighlight">\(n-2\)</span> elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(n)</span></code>, copying <span class="math notranslate nohighlight">\(n-1\)</span> elements</p></li>
</ul>
<p>In total, there are <span class="math notranslate nohighlight">\(1+2+...+(n-1)\)</span> element copy operations,
which is equal to <span class="math notranslate nohighlight">\(n(n-1)/2 = (n^2-n)/2\)</span>.
This means that the program takes <cite>quadratic time</cite>, not linear!</p>
<p>Suppose for example that <span class="math notranslate nohighlight">\(n = 1,000,000\)</span>. Using the formula
above, the number of times an array element gets copied is
<span class="math notranslate nohighlight">\(999999 \times 1000000/2 = 499,999,500,000\)</span>. If copying one
array element takes 1 ns, then the program spends nearly 10 minutes
just resizing the array!</p>
<p>What happens if we instead grow the array by 100 elements every time?
You can try the calculation yourself, for say <span class="math notranslate nohighlight">\(n = 1,000,000\)</span>.
What happens is that <code class="docutils literal notranslate"><span class="pre">resizeArray</span></code> gets called 100 times less
often – so there 100 times fewer elements copied. But the runtime is
still quadratic <a class="footnote-reference brackets" href="#id2" id="id1">1</a>. When <span class="math notranslate nohighlight">\(n = 1,000,000\)</span>, the total number of
elements copied is about <span class="math notranslate nohighlight">\(5,000,000,000\)</span>, still far too many.</p>
<p>In short, <strong>growing the array size by a constant amount is bad</strong>,
because a loop that repeatedly adds to the array will take quadratic time.</p>
</div>
<div class="section" id="growing-by-a-constant-factor">
<h3>4.<span class="section-number">4.2.2. </span>Growing by a constant factor<a class="headerlink" href="#growing-by-a-constant-factor" title="Permalink to this headline">¶</a></h3>
<p>One way to think about the problem is: as the array gets bigger,
resizing it gets more expensive. So, to make up for that, when the array
is bigger we need to grow it by more, so that we don’t have to resize
as often. One way to do this is to always double the array size when
it gets full. This turns out to work well!</p>
<p>Suppose that we run the example program with <span class="math notranslate nohighlight">\(n = 1000\)</span>, i.e. we
add 1000 elements to the list. As before, the internal array initially
has a size of 1. What calls to <code class="docutils literal notranslate"><span class="pre">resizeArray</span></code> happen, and how many
elements get copied each time?</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(2)</span></code>, copying 1 element</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(4)</span></code>, copying 2 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(8)</span></code>, copying 4 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(16)</span></code>, copying 8 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(32)</span></code>, copying 16 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(64)</span></code>, copying 32 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(128)</span></code>, copying 64 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(256)</span></code>, copying 128 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(512)</span></code>, copying 256 elements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizeArray(1024)</span></code>, copying 512 elements</p></li>
</ul>
<p>You can see that the array gets resized a whole lot at the beginning
– but as it gets bigger, it gets resized much less often. We can read
off how many elements get copied: <span class="math notranslate nohighlight">\(1+2+4+8+16+32+64+128+256+512 = 1023\)</span>.</p>
<p>Since the array starts from size 1 and always doubles, the array size
is always a power of two. So to calculate the total number of elements
copied, instead of adding up all the terms by hand, we can use the
formula <span class="math notranslate nohighlight">\(2^0+2^1+2^2+...+2^n = 2^{n+1}-1\)</span> (with <span class="math notranslate nohighlight">\(512=2^9\)</span>).</p>
<p>Suppose that we now choose <span class="math notranslate nohighlight">\(n=1,000,000\)</span>. How many elements get
copied? In this case the final array size will be <span class="math notranslate nohighlight">\(2^{20} = 1,048,576\)</span>.
The array size will eventually grow from <span class="math notranslate nohighlight">\(2^{18}\)</span> to <span class="math notranslate nohighlight">\(2^{19}\)</span>
to <span class="math notranslate nohighlight">\(2^{20}\)</span> elements, with the final call to <code class="docutils literal notranslate"><span class="pre">resizeArray</span></code>
copying <span class="math notranslate nohighlight">\(2^{19}\)</span> elements. Using the formula above, the total number
of elements copied is <span class="math notranslate nohighlight">\(2^0+2^1+2^2+...+2^{19} = 2^{20}-1 = 1,048,575\)</span>.</p>
<p>Compared to when we grew the array by a fixed size of 1 element, this is
<span class="math notranslate nohighlight">\(500,000\)</span> times fewer! So this in fact seems to be nice and efficient.</p>
<p>Let us now generalise to an arbitrary <span class="math notranslate nohighlight">\(n\)</span>. The worst case is when
the final call to <code class="docutils literal notranslate"><span class="pre">add</span></code> has to resize the array – that happens when
<span class="math notranslate nohighlight">\(n\)</span> is one more than a power of two, <span class="math notranslate nohighlight">\(n-1 = 2^k\)</span>. In that
case, the final call to <code class="docutils literal notranslate"><span class="pre">resizeArray</span></code> grows the array from
<span class="math notranslate nohighlight">\(2^k\)</span> to <span class="math notranslate nohighlight">\(2^{k+1}\)</span>, copying <span class="math notranslate nohighlight">\(2^k\)</span> elements.
The total number of elements copied is <span class="math notranslate nohighlight">\(2^0+2^1+2^2+...+2^k
= 2^{k+1} - 1 = 2 \cdot 2^k - 1 = 2(n-1) - 1 = 2n-3\)</span>. In fact, we have
just proved the following result.</p>
<p><strong>Theorem:</strong> When using the array-doubling strategy, calling
<code class="docutils literal notranslate"><span class="pre">add</span></code> <span class="math notranslate nohighlight">\(n\)</span> times starting from an empty dynamic array list
causes fewer than <span class="math notranslate nohighlight">\(2n\)</span> elements to be copied.</p>
<p>In short, the overhead of using a dynamic array list is at most <cite>two
array elements copied per element that we add</cite>. But copying an array
element is an extremely cheap operation, so dynamic array lists
implemented using array doubling have almost no overhead, compared to
static array lists. In particular, the complexity of our example
program is <cite>linear</cite>, just as we wanted.</p>
<p>What happens if we instead grow the array by 50%? In fact, it still
works out fine - the program takes linear time to run. To see this,
you can use the same argument as above, but instead of using the
formula <span class="math notranslate nohighlight">\(2^0+2^1+...+2^k = 2^{k+1}\)</span>, you have to use the formula
for a general <a class="reference external" href="https://en.wikipedia.org/wiki/Geometric_progression">geometric progression</a>. What you get is an overhead of
<cite>three elements copied per element added</cite>. In fact, Java <code class="docutils literal notranslate"><span class="pre">ArrayLists</span></code>
grow the array by 50% on resizing.</p>
<p>In fact, <strong>growing the array by any constant factor</strong> works, because
the same geometric progression reasoning applies. We can calculate
the exact performance overhead of growing the array by any given factor:</p>
<p><strong>Theorem:</strong> If we grow the array by a factor of <span class="math notranslate nohighlight">\(k\)</span> when
resizing it, then the overhead is at most <span class="math notranslate nohighlight">\(1+1/k\)</span> elements
copied per <code class="docutils literal notranslate"><span class="pre">add</span></code>. For example, when growing by 20% (k=0.2), the
overhead is 6 elements copied per <code class="docutils literal notranslate"><span class="pre">add</span></code>.</p>
<p>In short, when resizing a dynamic array list, we should <strong>grow the
array size by a factor</strong>, because this gives only a constant factor
performance overhead compared to using a static array list. We can choose
a large factor (such as 2) if we want fast performance, or a low
factor (such as 20%) if we want to save memory.</p>
</div>
<div class="section" id="constant-amount-vs-constant-factor">
<h3>4.<span class="section-number">4.2.3. </span>Constant amount vs constant factor<a class="headerlink" href="#constant-amount-vs-constant-factor" title="Permalink to this headline">¶</a></h3>
<p>Here is a graph that shows just how big the performance difference is
between the two resizing strategies: growing the array by a constant
amount, and scaling it by a constant factor. The graph plots how many
elements need to be copied, as a function of how many elements we add
to the list.</p>
<div class="divdgm" id="listgrowthgraph">
<div id="ListArrayDynamicZoomCON">
</div>
</div>
<p>Notice that although growing by 10000 seems pretty good at first, for
largest lists it’s worse than growing by 10%. We can see this more
clearly if we zoom out the graph, making the <em>x</em>-axis go up to
<span class="math notranslate nohighlight">\(10,000,000\)</span> instead of <span class="math notranslate nohighlight">\(1,000,000\)</span>:</p>
<div class="divdgm">
<div id="ListArrayDynamicCON">
</div>
</div>
<p>Though you can’t see it in the graph, at <span class="math notranslate nohighlight">\(x=10,000,000\)</span>, growing
by 10000 is <strong>5000 times</strong> slower than growing by 10%! This is because
the “growing by 10000” strategy takes quadratic time: if we do 10 times as many
calls to <code class="docutils literal notranslate"><span class="pre">add</span></code>, it takes 100 times as long. Quadratic algorithms
always lose to linear algorithms eventually!</p>
</div>
</div>
<div class="section" id="shrinking-the-internal-array">
<h2>4.<span class="section-number">4.3. </span>Shrinking the internal array<a class="headerlink" href="#shrinking-the-internal-array" title="Permalink to this headline">¶</a></h2>
<p>We don’t have to change anything else in the code from <strong>StaticArrayList</strong>
to have a working dynamic array list that has room for any number of elements.</p>
<p>But the problem is that if we first build a large list with 1000’s of elements,
and then remove most of them, we will still have a large internal array where
almost all cells are unused.
So, let’s resize the array also when removing elements!
When the array contains too many unused cells, we shrink it to half the size.</p>
<p>Now, it’s important that we <em>don’t</em> shrink the array when it’s half full.
Why is that? Let’s consider the following sequence of additions and deletions:</p>
<ul class="simple">
<li><p>append an element to the end</p></li>
<li><p>remove the last element</p></li>
<li><p>append another element to the end</p></li>
<li><p>remove it</p></li>
<li><p>append another one</p></li>
<li><p>remove it</p></li>
<li><p>…</p></li>
</ul>
<p>If we’re unlucky and the initial list is full, then the first append will have to resize the array.
Then when we remove that element, the list becomes less than half-full, and we have to resize again.
Then the next append will resize, and the next remove will also resize. And so on…
This will lead to a linear-time resize every time we append/remove, and so
the final complexity will be linear (per operation). Which is not what we want.</p>
<p>How can we alleviate this?
The solution is to wait even longer until we shrink the internal array!
E.g., we can shrink the array (i.e., halve it), when it is only 1/3 full.
So we can add the following lines to the end of the <code class="docutils literal notranslate"><span class="pre">remove</span></code> method:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>if listSize &lt;= size of internalArray * 1/3
    resizeArray(size of internalArray * 1/2)
</pre></div>
</div>
<p>That’s the only difference from the <code class="docutils literal notranslate"><span class="pre">StaticArrayList.remove</span></code> method.</p>
<p>Note that the factors 1/3 and 1/2 are not important, as explained before.
The only thing that matters is that the minimum load factor (1/3) is smaller
than the shrinking factor (1/2).
So the dynamic <code class="docutils literal notranslate"><span class="pre">remove</span></code> method will look like this.</p>
<div id="DynamicArrayList_DynamicArrayListRemove_code"><ul><li><a href="#DynamicArrayList_DynamicArrayListRemove_code_Java_Generic">Java</a></li><li><a href="#DynamicArrayList_DynamicArrayListRemove_code_Python">Python</a></li></ul><div id="DynamicArrayList_DynamicArrayListRemove_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span>    <span class="kd">public</span> <span class="n">E</span> <span class="nf">remove</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">listSize</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IndexOutOfBoundsException</span><span class="p">(</span><span class="s">&quot;list index out of range&quot;</span><span class="p">);</span>
        <span class="n">E</span> <span class="n">x</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">listSize</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
            <span class="n">internalArray</span><span class="o">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="p">;</span>
        <span class="n">listSize</span><span class="o">--</span><span class="p">;</span>
        <span class="n">internalArray</span><span class="o">[</span><span class="n">listSize</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>   <span class="c1">// For garbage collection</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">listSize</span> <span class="o">&lt;=</span> <span class="n">internalArray</span><span class="p">.</span><span class="na">length</span> <span class="o">*</span> <span class="n">MinLoadFactor</span><span class="p">)</span>
            <span class="n">resizeArray</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">internalArray</span><span class="p">.</span><span class="na">length</span> <span class="o">/</span> <span class="n">CapacityMultiplier</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>
</div>
</div><div id="DynamicArrayList_DynamicArrayListRemove_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;list index out of range&quot;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># For garbage collection</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minLoadFactor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_resizeArray</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacityMultiplier</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#DynamicArrayList_DynamicArrayListRemove_code" ).tabs();});</script><div class="line-block">
<div class="line"><br /></div>
</div>
<div id="DynamicArrayList-Remove-CON" class="ssAV" data-points="0.0" data-threshold="1.0" data-type="ss" data-required="False" data-short-name="DynamicArrayList-Remove-CON" data-long-name="Dynamic Array-based List Deletion Slideshow" data-exer-id="" alt="Dynamic Array-based List Deletion Slideshow" tabIndex="-1">
 <span class="jsavcounter"></span>
 <a class="jsavsettings" href="#">Settings</a>
 <div class="jsavcontrols"></div>
 <p class="jsavoutput jsavline"></p>
 <div class="jsavcanvas"></div>
 <div class="prof_indicators">
  <img id="DynamicArrayList-Remove-CON_check_mark" class="prof_check_mark" src="_static/Images/green_check.png" alt="Proficient" />
  <span id="DynamicArrayList-Remove-CON_cm_saving_msg" class="cm_saving_msg">Saving...</span>
  <span id="DynamicArrayList-Remove-CON_cm_error_msg" class="cm_error_msg">
   <img id="DynamicArrayList-Remove-CON_cm_warning_icon" class="cm_warning_icon" src="_static/Images/warning.png" alt="Error Saving" /><br />
   Server Error<br />
   <a href="#" class="resubmit_link">Resubmit</a>
  </span>
 </div>
</div>
<p></p>
</div>
<div class="section" id="dynamic-array-based-list-full-code">
<h2>4.<span class="section-number">4.4. </span>Dynamic Array-based List: Full code<a class="headerlink" href="#dynamic-array-based-list-full-code" title="Permalink to this headline">¶</a></h2>
<p>Finally, here is the full source code for the class <code class="docutils literal notranslate"><span class="pre">DynamicArrayList</span></code>.
Note that now the constructor doesn’t take any capacity argument,
since the internal array will automatically grow when needed.</p>
<p>In this example, we set the capacity multiplier to 1.5,
meaning that we grow by 50% and shrink by 33% on every resize.
The minimum load factor is set to 50% (which is smaller than 1/1.5 = 67%),
and the minimum array capacity is 8.
All these constants can be changed at will.</p>
<div id="DynamicArrayList_DynamicArrayList_code"><ul><li><a href="#DynamicArrayList_DynamicArrayList_code_Java_Generic">Java</a></li><li><a href="#DynamicArrayList_DynamicArrayList_code_Python">Python</a></li></ul><div id="DynamicArrayList_DynamicArrayList_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nc">DynamicArrayList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">E</span><span class="o">[]</span> <span class="n">internalArray</span><span class="p">;</span>   <span class="c1">// Internal array containing the list elements</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">listSize</span><span class="p">;</span>        <span class="c1">// Size of list</span>

    <span class="kd">static</span> <span class="kt">int</span> <span class="n">MinCapacity</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>               <span class="c1">// Minimum capacity of internalArray</span>
    <span class="kd">static</span> <span class="kt">double</span> <span class="n">MinLoadFactor</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>        <span class="c1">// Must be smaller than 1/CapacityMultiplier</span>
    <span class="kd">static</span> <span class="kt">double</span> <span class="n">CapacityMultiplier</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">;</span>   <span class="c1">// Factor to grow/shrink the capacity</span>

    <span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;unchecked&quot;</span><span class="p">)</span>
    <span class="kd">public</span> <span class="nf">DynamicArrayList</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">internalArray</span> <span class="o">=</span> <span class="p">(</span><span class="n">E</span><span class="o">[]</span><span class="p">)</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">MinCapacity</span><span class="o">]</span><span class="p">;</span>
        <span class="n">listSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">E</span> <span class="nf">get</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">listSize</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IndexOutOfBoundsException</span><span class="p">(</span><span class="s">&quot;list index out of range&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">E</span> <span class="nf">set</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">E</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">listSize</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IndexOutOfBoundsException</span><span class="p">(</span><span class="s">&quot;list index out of range&quot;</span><span class="p">);</span>
        <span class="n">E</span> <span class="n">old</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
        <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">old</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">E</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">listSize</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IndexOutOfBoundsException</span><span class="p">(</span><span class="s">&quot;list index out of range&quot;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">listSize</span> <span class="o">&gt;=</span> <span class="n">internalArray</span><span class="p">.</span><span class="na">length</span><span class="p">)</span>
            <span class="n">resizeArray</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">internalArray</span><span class="p">.</span><span class="na">length</span> <span class="o">*</span> <span class="n">CapacityMultiplier</span><span class="p">));</span>
        <span class="n">listSize</span><span class="o">++</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">listSize</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">k</span><span class="o">--</span><span class="p">)</span>
            <span class="n">internalArray</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span><span class="p">;</span>
        <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">E</span> <span class="nf">remove</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">listSize</span><span class="p">))</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IndexOutOfBoundsException</span><span class="p">(</span><span class="s">&quot;list index out of range&quot;</span><span class="p">);</span>
        <span class="n">E</span> <span class="n">x</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">listSize</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span>
            <span class="n">internalArray</span><span class="o">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">k</span><span class="o">]</span><span class="p">;</span>
        <span class="n">listSize</span><span class="o">--</span><span class="p">;</span>
        <span class="n">internalArray</span><span class="o">[</span><span class="n">listSize</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>   <span class="c1">// For garbage collection</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">listSize</span> <span class="o">&lt;=</span> <span class="n">internalArray</span><span class="p">.</span><span class="na">length</span> <span class="o">*</span> <span class="n">MinLoadFactor</span><span class="p">)</span>
            <span class="n">resizeArray</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">internalArray</span><span class="p">.</span><span class="na">length</span> <span class="o">/</span> <span class="n">CapacityMultiplier</span><span class="p">));</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">resizeArray</span><span class="p">(</span><span class="kt">int</span> <span class="n">newCapacity</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">newCapacity</span> <span class="o">&lt;</span> <span class="n">MinCapacity</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s">&quot;unchecked&quot;</span><span class="p">)</span>
        <span class="n">E</span><span class="o">[]</span> <span class="n">newArray</span> <span class="o">=</span> <span class="p">(</span><span class="n">E</span><span class="o">[]</span><span class="p">)</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">newCapacity</span><span class="o">]</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">listSize</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
            <span class="n">newArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">internalArray</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
        <span class="n">internalArray</span> <span class="o">=</span> <span class="n">newArray</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">listSize</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">listSize</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">internalArray</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">listSize</span><span class="p">).</span><span class="na">iterator</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div id="DynamicArrayList_DynamicArrayList_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DynamicArrayList</span><span class="p">(</span><span class="n">List</span><span class="p">):</span>
    <span class="n">_minCapacity</span> <span class="o">=</span> <span class="mi">8</span>            <span class="c1"># Minimum capacity of internalArray</span>
    <span class="n">_minLoadFactor</span> <span class="o">=</span> <span class="mf">0.5</span>        <span class="c1"># Must be smaller than 1/CapacityMultiplier</span>
    <span class="n">_capacityMultiplier</span> <span class="o">=</span> <span class="mf">1.5</span>   <span class="c1"># Factor to grow/shrink the capacity</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minCapacity</span>   <span class="c1"># Internal array containing the list elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">=</span> <span class="mi">0</span>                                 <span class="c1"># Size of list</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;list index out of range&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;list index out of range&quot;</span><span class="p">)</span>
        <span class="n">old</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
        <span class="k">return</span> <span class="n">old</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;list index out of range&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_resizeArray</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacityMultiplier</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span> <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;list index out of range&quot;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># For garbage collection</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minLoadFactor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_resizeArray</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capacityMultiplier</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="k">def</span> <span class="nf">_resizeArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newCapacity</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">newCapacity</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minCapacity</span><span class="p">:</span> <span class="k">return</span>
        <span class="n">newArray</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">newCapacity</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span>
            <span class="n">newArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span> <span class="o">=</span> <span class="n">newArray</span>

    <span class="k">def</span> <span class="nf">isEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_listSize</span><span class="p">):</span>
            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internalArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#DynamicArrayList_DynamicArrayList_code" ).tabs();});</script><dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>You can get a precise number by using the formula for an
<a class="reference external" href="https://en.wikipedia.org/wiki/Arithmetic_progression">arithmetic progression</a>.</p>
</dd>
</dl>
<script type="text/javascript" src="../../../AV/ChalmersGU/DynamicArrayList-Append-CON.js"></script>
<script type="text/javascript" src="../../../DataStructures/Plot.js"></script>
<script type="text/javascript" src="../../../AV/List/ListArrayDynamicZoomCON.js"></script>
<script type="text/javascript" src="../../../AV/List/ListArrayDynamicCON.js"></script>
<script type="text/javascript" src="../../../AV/ChalmersGU/DynamicArrayList-Remove-CON.js"></script>
</div>
</div>


      </div>
      <div class="bottomnav">
      <p><span class="email_div" style="display:inline;"><a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a><a style="float:left;color:blue;" rel="nofollow" href="../../../lib/Privacy.html" target="_blank">| Privacy |</a> <a style="float:left;color:blue;" rel="nofollow" href="../../../lib/license.html" target="_blank">| License</a></span>&#160;&#160;
      
        «&#160;&#160;<a id="prevmod1" href="ListArray.html">4.<span class="section-number">3. </span>Static Array-Based Lists</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod1" href="ListLinked.html">4.<span class="section-number">5. </span>Linked Lists</a>&#160;&#160;»

</p>
      </div>
      <img style="float:right;" src="_static/nsf1.gif" height="62" width="62" alt="nsf"/>


    <div class="footer">
      <p>
        <span class="email_div" style="display:inline;">
          <a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a>
          <a id="bugreport-link" style="float:left;color:blue;" class="bugreport-link" href="#">| Report a bug</a>
        </span>
      </p>
        &copy; Copyright 2016 by OpenDSA Project Contributors and distributed under an MIT license.
      Last updated on Dec 03, 2021.
      Created using <a target="_blank" href="http://sphinx.pocoo.org/">Sphinx</a> 2.4.4.
    </div>
    
<div id="bugreport-box" class="bugreport-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="report" action="https://#">
    <fieldset class="textbox">
      <div id="bug_error" class="error"></div>
      <label>
        <span>Summary*:</span>
        <input type="text" id="b_title" placeholder="Summary" />
      </label>

      <label class="os">
        <span>Operating system*:</span>
        <select id="b_os">
          <option value="windows">Windows</option>
          <option value="macos">Mac OS</option>
          <option value="linux">Linux</option>
          <option value="ios">iOS</option>
          <option value="android">Android</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="browser">
        <span>Browser*:</span>
        <select id="b_browser">
          <option value="chrome">Chrome</option>
          <option value="safari">Safari</option>
          <option value="internetexplorer">Internet Explorer</option>
          <option value="opera">Opera</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="description">
        <span>Description*:</span><br>
        <textarea id="b_description" rows="5" cols="25" placeholder="***BUG** Please enter: (1) a consice description of the problem. (2) steps to reproduce bug. (3) the version of your browser and operating system."></textarea>
      </label>

      <label class="screenshot">
        <span>Attach a screenshot (optional):</span>
        <input type="file" id="b_screenshot" accept="image/*" placeholder="Attach a screenshot (optional)">
      </label>

      <p>
        <input type="submit" id="bug-submit-button" value="Submit &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>

  </body>
</html>