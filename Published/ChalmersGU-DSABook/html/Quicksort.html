
<!DOCTYPE html>




<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.12. Quicksort &mdash; Data Structures and Algorithms</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/normalize.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/JSAV.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaMOD-min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/jquery.ui.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/odsaStyle-min.css" type="text/css" />
    <link rel="stylesheet" href="../../../lib/accessibility.css" type="text/css" />
    
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    './',
      VERSION:     '0.4.1',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
      },
      "HTML-CSS": {
        scale: "80"
      }
    });
  </script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="index" title="Data Structures and Algorithms" href="index.html" />
    <link rel="next" title="13. An Empirical Comparison of Sorting Algorithms" href="SortingEmpirical.html" />
    <link rel="prev" title="11. Implementing Mergesort" href="MergesortImpl.html" />

  </head>

  <body>


      <div class="header">
        
  
      <script type="text/javascript" src="../../../lib/jquery.min.js"></script>
      <script type="text/javascript" src="../../../lib/jquery.migrate.min.js"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/localforage/1.9.0/localforage.min.js"></script>
      <script type="text/javascript" src="../../../lib/accessibility.js"></script>
    <script type="text/javascript" src="../../../lib/jquery.ui.min.js"></script>
    <script type="text/javascript" src="../../../lib/jquery.transit.js"></script>
    <script type="text/javascript" src="../../../lib/raphael.js"></script>
    <script type="text/javascript" src="../../../lib/JSAV-min.js"></script>
    <script type="text/javascript" src="_static/config.js"></script>
    <script type="text/javascript" src="../../../lib/timeme-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaUtils-min.js"></script>
    <script type="text/javascript" src="../../../lib/odsaMOD-min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
    <script type="text/javascript" src="https://d3js.org/d3-selection-multi.v1.min.js"></script>
    <script type="text/javascript" src="../../../lib/dataStructures.js"></script>
    <script type="text/javascript" src="../../../lib/conceptMap.js"></script>

        
<a id="username-link" style="float:right;color:red;margin:10px 20px auto; display: none" class="username-link" href="Gradebook.html"></a>
<a id="login-link" style="float:right;color:red;margin:10px 20px auto" class="login-link" href="#"><Macro 'login'></a>
<div id="login-box" class="login-popup">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <label class="username">
        <span>Username</span>
        <input id="username" value="" type="text" autocomplete="on" placeholder="Username" tabindex="1">
      </label>
      <label class="password">
        <span>Password</span>
        <input id="password" value="" type="password" placeholder="Password" tabindex="2">
        <span><a id="forgot" href="#">Forgot your password?</a></span>
      </label>

      <p>
        <input type="submit" id="login-submit-button" value="Sign in" tabindex="3" />
      </p>
      <p>
        <input type="button" id="register-button" value="Register" tabindex="4" />
      </p>
    </fieldset>
  </form>
</div>

        
<a id="registration-link" style="float:right;color:red;margin:10px 20px auto" class="registration-link" href="#">Register</a>
<div id="registration-box" class="registration-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="signin" action="https://#">
    <fieldset class="textbox">
      <div id="register_error" class="error"></div>
      <label class="username">
        <span>Username:</span>
        <input type="text" id="user" placeholder="Username" />
      </label>

      <label class="password">
        <span>Password</span>
        <input id="pass" type="password" placeholder="Password" />
      </label>

      <label class="password">
        <span>Confirm Password</span>
        <input id="rpass" type="password" placeholder="Confirm Password" />
      </label>

      <label class="email">
        <span>Email:</span>
        <input type="text" id="email" placeholder="Email">
      </label>

      <p>
        <input type="submit" id="register-submit-button" value="Register &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>
<img class="leftlogo" src="_static/OpenDSALogoT64.png" alt="Logo"/><div class="title-wrapper">
          <div class="title-inbetween" style="display: table-cell; vertical-align: middle;">
            <div class="title-content">
              <h1 class="heading" ><a href="index.html">
                <span>Data Structures and Algorithms</span></a></h1>
              <h2 class="heading" ><span>Chapter 2 Arrays: Searching and Sorting</span></h2>
            </div>
          </div>
        </div>
      </div>
      <div class="topnav">
        <p>
            <a style="float:left;color:blue;" href="../source/Quicksort.rst.rst"
              target="_blank" rel="nofollow">Show Source | </a>&#160;&#160;
            <a class="abt" style="float:left;color:blue;" href="#" rel="nofollow">| About</a>&#160;&#160;

          
        «&#160;&#160;<a id="prevmod" href="MergesortImpl.html">2.<span class="section-number">11. </span>Implementing Mergesort</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod" href="SortingEmpirical.html">2.<span class="section-number">13. </span>An Empirical Comparison of Sorting Algorithms</a>&#160;&#160;»


        </p>
      </div>
       
      <div class="content">
        
  <script>ODSA.SETTINGS.MODULE_SECTIONS = ['introduction', 'partition', 'putting-it-together', 'quicksort-analysis', 'pivots-in-practice', 'more-practical-improvements'];</script><script>ODSA.SETTINGS.DISP_MOD_COMP = true;ODSA.SETTINGS.MODULE_NAME = "Quicksort";ODSA.SETTINGS.MODULE_LONG_NAME = "Quicksort";ODSA.SETTINGS.MODULE_CHAPTER = "Arrays: Searching and Sorting"; ODSA.SETTINGS.BUILD_DATE = "2021-11-03 17:21:57"; ODSA.SETTINGS.BUILD_CMAP = true;JSAV_OPTIONS['lang']='en';JSAV_EXERCISE_OPTIONS['code']='pseudo';</script><link href="../../../AV/Sorting/quicksortCON.css" rel="stylesheet" type="text/css" />
<link href="../../../AV/Sorting/QuickSortPartitionAnalysisCON.css" rel="stylesheet" type="text/css" />
<link href="../../../AV/Sorting/QuickSortWorstCaseCON.css" rel="stylesheet" type="text/css" />
<link href="../../../AV/Sorting/QuickSortBestCaseCON.css" rel="stylesheet" type="text/css" />
<link href="../../../AV/Sorting/QuickSortAverageCaseCON.css" rel="stylesheet" type="text/css" />
<div class="section" id="index-0">
<span id="id1"></span><h1>2.<span class="section-number">12. </span>Quicksort<a class="headerlink" href="#index-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>2.<span class="section-number">12.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>While Mergesort uses the most obvious form of divide and conquer
(split the list in half then sort the halves), this is not the only way
that we can break down the sorting problem.
We saw that doing the merge step for Mergesort when using an array
implementation is not so easy.
So perhaps a different divide and conquer strategy might turn out to
be more efficient?</p>
<p><a class="reference internal" href="Glossary.html#term-quicksort"><span class="xref std std-term">Quicksort</span></a> is aptly named because, when properly
implemented, it is one of the fastest known general-purpose in-memory
sorting algorithms in the average case.
It does not require the extra array needed by Mergesort, so it is
space efficient as well.
Quicksort is widely used, and is typically the algorithm implemented
in a library sort routine such as the UNIX <code class="docutils literal notranslate"><span class="pre">qsort</span></code>
function.
Interestingly, Quicksort is hampered by exceedingly poor worst-case
performance, thus making it inappropriate for certain applications.</p>
<p id="index-1">Quicksort first selects a value called the <a class="reference internal" href="Glossary.html#term-pivot"><span class="xref std std-term">pivot</span></a>.
Assume that the input array contains <span class="math notranslate nohighlight">\(k\)</span> records with key values
less than the pivot.
The records are then rearranged in such a way that the <span class="math notranslate nohighlight">\(k\)</span>
values less than the pivot are placed in the first, or leftmost,
<span class="math notranslate nohighlight">\(k\)</span> positions in the array, the pivot itself is placed
at index <span class="math notranslate nohighlight">\(k\)</span>, and the values greater than or equal to the pivot
are placed in the last, or rightmost, <span class="math notranslate nohighlight">\(n-k-1\)</span>
positions.
This is called a <a class="reference internal" href="Glossary.html#term-partition"><span class="xref std std-term">partition</span></a> of the array.
The values placed in a given partition need not (and typically will
not) be sorted with respect to each other.
All that is required is that all values end up in the correct
partition.
The pivot value itself is placed in position <span class="math notranslate nohighlight">\(k\)</span>.
Quicksort then proceeds to sort the resulting subarrays now on either
side of the pivot, one of size <span class="math notranslate nohighlight">\(k\)</span> and the other of size
<span class="math notranslate nohighlight">\(n-k-1\)</span>.
How are these values sorted?
Because Quicksort is such a good algorithm, using Quicksort on
the subarrays would be appropriate.</p>
<p>Unlike some of the sorts that we have seen earlier in this chapter,
Quicksort might not seem very “natural” in that it is not an
approach that a person is likely to use to sort real objects.
But it should not be too surprising that a really efficient sort for
huge numbers of abstract objects on a computer would be rather
different from our experiences with sorting a relatively few physical
objects.</p>
<p>Here is an implementation for Quicksort.
Parameters <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">j</span></code> define the left and right
indices, respectively, for the subarray being sorted.
The initial call to <code class="docutils literal notranslate"><span class="pre">quicksort</span></code> would be
<code class="docutils literal notranslate"><span class="pre">quicksort(array,</span> <span class="pre">0,</span> <span class="pre">n-1)</span></code>.</p>
<div id="Quicksort_Quicksort_code"><ul><li><a href="#Quicksort_Quicksort_code_Java_Generic">Java</a></li><li><a href="#Quicksort_Quicksort_code_Python">Python</a></li></ul><div id="Quicksort_Quicksort_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="kt">void</span> <span class="nf">quicksort</span><span class="p">(</span><span class="n">T</span><span class="o">[]</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;=</span> <span class="n">j</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>                   <span class="c1">// Base case: array of length 0 or 1</span>
  <span class="kt">int</span> <span class="n">pivotindex</span> <span class="o">=</span> <span class="n">findpivot</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>  <span class="c1">// Pick a pivot</span>
  <span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">pivotindex</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>               <span class="c1">// Stick pivot at end</span>
  <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">partition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">A</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="p">);</span>   <span class="c1">// k will be the first position in the right subarray</span>
  <span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>                        <span class="c1">// Put pivot in place</span>
  <span class="n">quicksort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>                 <span class="c1">// Sort left partition</span>
  <span class="n">quicksort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>                 <span class="c1">// Sort right partition</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div id="Quicksort_Quicksort_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">quicksort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">j</span><span class="p">:</span> <span class="k">return</span>                <span class="c1"># Base case: array of size 0 or 1</span>
  <span class="n">pivotindex</span> <span class="o">=</span> <span class="n">findpivot</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>  <span class="c1"># Pick a pivot</span>
  <span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">pivotindex</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>           <span class="c1"># Stick pivot at end</span>
  <span class="n">k</span> <span class="o">=</span> <span class="n">partition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>   <span class="c1"># k will be the first position in the right subarray</span>
  <span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>                    <span class="c1"># Put pivot in place</span>
  <span class="n">quicksort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>             <span class="c1"># Sort left partition</span>
  <span class="n">quicksort</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>             <span class="c1"># Sort right partition</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#Quicksort_Quicksort_code" ).tabs();});</script><p>Function <code class="docutils literal notranslate"><span class="pre">partition</span></code> will move records to the
appropriate partition and then return <code class="docutils literal notranslate"><span class="pre">k</span></code>, the first
position in the right partition.
Note that the pivot value is initially placed at the end of the array
(position <code class="docutils literal notranslate"><span class="pre">j</span></code>).
Thus, <code class="docutils literal notranslate"><span class="pre">partition</span></code> must not affect the value of array position <code class="docutils literal notranslate"><span class="pre">j</span></code>.
After partitioning, the pivot value is placed in position <code class="docutils literal notranslate"><span class="pre">k</span></code>,
which is its correct position in the final, sorted array.
By doing so, we guarantee that at least one value (the pivot) will not
be processed in the recursive calls to <code class="docutils literal notranslate"><span class="pre">qsort</span></code>.
Even if a bad pivot is selected, yielding a completely empty
partition to one side of the pivot, the larger partition will contain
at most <span class="math notranslate nohighlight">\(n-1\)</span> records.</p>
<p>Selecting a pivot can be done in many ways. The simplest is to use the
first key. However, if the input is sorted or reverse sorted, this
will produce a poor partitioning with all values to one side of the
pivot. One simple way to avoid this problem is to select the middle
position in the array. Here is a simple <code class="docutils literal notranslate"><span class="pre">findpivot</span></code> function
implementing this idea. Note that later in the chapter we will switch
to a better pivot selection strategy.</p>
<div id="Quicksort_findpivot_code"><ul><li><a href="#Quicksort_findpivot_code_Java_Generic">Java</a></li><li><a href="#Quicksort_findpivot_code_Python">Python</a></li></ul><div id="Quicksort_findpivot_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="kt">int</span> <span class="nf">findpivot</span><span class="p">(</span><span class="n">T</span><span class="o">[]</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div id="Quicksort_findpivot_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">findpivot</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#Quicksort_findpivot_code" ).tabs();});</script><div
    id="QuicksortPivotPRO"
    class="embedContainer"
    data-exer-name="QuicksortPivotPRO"
    data-long-name="Quicksort Pivot Proficiency Exercise"
    data-short-name="QuicksortPivotPRO"
    data-frame-src="../../../Exercises/Sorting/QuicksortPivotPRO.html?localMode=true&amp;module=Quicksort&amp;selfLoggingEnabled=false&amp;JXOP-debug=true&amp;JOP-lang=en&amp;JXOP-code=pseudo"
    data-frame-width="950"
    data-frame-height="525"
    data-vertical-scrolling="no"
    data-external="false"
    data-points="1.0"
    data-required="True"
    data-showhide="show"
    data-threshold="5"
    data-type="ka"
    data-exer-id="">
  
  <div class="center">
    <div id="QuicksortPivotPRO_iframe"></div>
  </div>
</div>
</div>
<div class="section" id="partition">
<h2>2.<span class="section-number">12.2. </span>Partition<a class="headerlink" href="#partition" title="Permalink to this headline">¶</a></h2>
<p>We now turn to function <code class="docutils literal notranslate"><span class="pre">partition</span></code>.
If we knew in advance how many keys are less than the pivot,
<code class="docutils literal notranslate"><span class="pre">partition</span></code> could simply copy records with key values less
than the pivot to the low end of the array, and records with larger
keys to the high end.
Because we do not know in advance how many keys are less than
the pivot,
we use a clever algorithm that moves indices inwards from the
ends of the subarray, swapping values as necessary until the two
indices meet.
Here is an implementation for the partition step.</p>
<div id="Quicksort_partition_code"><ul><li><a href="#Quicksort_partition_code_Java_Generic">Java</a></li><li><a href="#Quicksort_partition_code_Python">Python</a></li></ul><div id="Quicksort_partition_code_Java_Generic"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="kt">int</span> <span class="nf">partition</span><span class="p">(</span><span class="n">T</span><span class="o">[]</span> <span class="n">A</span><span class="p">,</span> <span class="kt">int</span> <span class="n">left</span><span class="p">,</span> <span class="kt">int</span> <span class="n">right</span><span class="p">,</span> <span class="n">T</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Move bounds inward until they meet</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">A</span><span class="o">[</span><span class="n">left</span><span class="o">]</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">left</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">right</span> <span class="o">&gt;=</span> <span class="n">left</span> <span class="o">&amp;&amp;</span> <span class="n">A</span><span class="o">[</span><span class="n">right</span><span class="o">]</span><span class="p">.</span><span class="na">compareTo</span><span class="p">(</span><span class="n">pivot</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">right</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Swap out-of-place values</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">right</span> <span class="o">&gt;</span> <span class="n">left</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// Return first position in right partition</span>
  <span class="k">return</span> <span class="n">left</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div id="Quicksort_partition_code_Python"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">partition</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">pivot</span><span class="p">):</span>
  <span class="c1"># Move bounds inward until they meet</span>
  <span class="k">while</span> <span class="n">left</span> <span class="o">&lt;=</span> <span class="n">right</span><span class="p">:</span>
    <span class="k">while</span> <span class="n">A</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">:</span>
      <span class="n">left</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">right</span> <span class="o">&gt;=</span> <span class="n">left</span> <span class="o">&amp;&amp;</span> <span class="n">A</span><span class="p">[</span><span class="n">right</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pivot</span><span class="p">:</span>
      <span class="n">right</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c1"># Swap out-of-place values</span>
    <span class="k">if</span> <span class="n">right</span> <span class="o">&gt;</span> <span class="n">left</span><span class="p">:</span>
      <span class="n">Swap</span><span class="o">.</span><span class="n">swap</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
  <span class="c1"># Return first position in right partition</span>
  <span class="k">return</span> <span class="n">left</span>
</pre></div>
</div>
</div></div><script>$(function() {$( "#Quicksort_partition_code" ).tabs();});</script><p>Note the check that <code class="docutils literal notranslate"><span class="pre">right</span> <span class="pre">&gt;=</span> <span class="pre">left</span></code> in the second inner
<code class="docutils literal notranslate"><span class="pre">while</span></code> loop.
This ensures that <code class="docutils literal notranslate"><span class="pre">right</span></code> does not run off the low end of the
partition in the case where the pivot is the least value in that
partition.
Function <code class="docutils literal notranslate"><span class="pre">partition</span></code> returns the first index of the right
partition (the place where <code class="docutils literal notranslate"><span class="pre">left</span></code> ends at) so that the subarray
bound for the recursive calls to <code class="docutils literal notranslate"><span class="pre">qsort</span></code> can be determined.</p>
<div id="quicksortCON" class="ssAV" data-points="0.0" data-threshold="1.0" data-type="ss" data-required="False" data-short-name="quicksortCON" data-long-name="Quicksort Partition Slideshow" data-exer-id="" alt="Quicksort Partition Slideshow" tabIndex="-1">
 <span class="jsavcounter"></span>
 <a class="jsavsettings" href="#">Settings</a>
 <div class="jsavcontrols"></div>
 <p class="jsavoutput jsavline"></p>
 <div class="jsavcanvas"></div>
 <div class="prof_indicators">
  <img id="quicksortCON_check_mark" class="prof_check_mark" src="_static/Images/green_check.png" alt="Proficient" />
  <span id="quicksortCON_cm_saving_msg" class="cm_saving_msg">Saving...</span>
  <span id="quicksortCON_cm_error_msg" class="cm_error_msg">
   <img id="quicksortCON_cm_warning_icon" class="cm_warning_icon" src="_static/Images/warning.png" alt="Error Saving" /><br />
   Server Error<br />
   <a href="#" class="resubmit_link">Resubmit</a>
  </span>
 </div>
</div>
<p></p>
<div
    id="QuicksortPartitPRO"
    class="embedContainer"
    data-exer-name="QuicksortPartitPRO"
    data-long-name="Quicksort Partition Proficiency Exercise"
    data-short-name="QuicksortPartitPRO"
    data-frame-src="../../../Exercises/Sorting/QuicksortPartitPRO.html?localMode=true&amp;module=Quicksort&amp;selfLoggingEnabled=false&amp;JXOP-debug=true&amp;JOP-lang=en&amp;JXOP-code=pseudo"
    data-frame-width="950"
    data-frame-height="540"
    data-vertical-scrolling="no"
    data-external="false"
    data-points="1.0"
    data-required="True"
    data-showhide="show"
    data-threshold="5"
    data-type="ka"
    data-exer-id="">
  
  <div class="center">
    <div id="QuicksortPartitPRO_iframe"></div>
  </div>
</div>
<p>And here is a visualization illustrating the running time analysis of the partition function</p>
<div id="QuickSortPartitionAnalysisCON" class="ssAV" data-points="0.0" data-threshold="1.0" data-type="ss" data-required="False" data-short-name="QuickSortPartitionAnalysisCON" data-long-name="Quicksort Partition Analysis Slideshow" data-exer-id="" alt="Quicksort Partition Analysis Slideshow" tabIndex="-1">
 <span class="jsavcounter"></span>
 <a class="jsavsettings" href="#">Settings</a>
 <div class="jsavcontrols"></div>
 <p class="jsavoutput jsavline"></p>
 <div class="jsavcanvas"></div>
 <div class="prof_indicators">
  <img id="QuickSortPartitionAnalysisCON_check_mark" class="prof_check_mark" src="_static/Images/green_check.png" alt="Proficient" />
  <span id="QuickSortPartitionAnalysisCON_cm_saving_msg" class="cm_saving_msg">Saving...</span>
  <span id="QuickSortPartitionAnalysisCON_cm_error_msg" class="cm_error_msg">
   <img id="QuickSortPartitionAnalysisCON_cm_warning_icon" class="cm_warning_icon" src="_static/Images/warning.png" alt="Error Saving" /><br />
   Server Error<br />
   <a href="#" class="resubmit_link">Resubmit</a>
  </span>
 </div>
</div>
<p></p>
</div>
<div class="section" id="putting-it-together">
<h2>2.<span class="section-number">12.3. </span>Putting It Together<a class="headerlink" href="#putting-it-together" title="Permalink to this headline">¶</a></h2>
<p>Here is a visualization for the entire Quicksort algorithm.
This visualization shows you how the logical decomposition caused by
the partitioning process works.
In the visualization, the separate sub-partitions are separated out to
match the recursion tree.
In reality, there is only a single array involved (as you will see in
the proficiency exercise that follows the visualization).</p>
<div
    id="quicksortAV"
    class="embedContainer"
    data-exer-name="quicksortAV"
    data-long-name="Quicksort Visualization"
    data-short-name="quicksortAV"
    data-frame-src="../../../AV/Sorting/quicksortAV.html?localMode=true&amp;module=Quicksort&amp;selfLoggingEnabled=false&amp;JXOP-debug=true&amp;JOP-lang=en&amp;JXOP-code=pseudo"
    data-frame-width="950"
    data-frame-height="650"
    data-vertical-scrolling="no"
    data-external="false"
    data-points="0.0"
    data-required="False"
    data-showhide="show"
    data-threshold="1"
    data-type="ss"
    data-exer-id="">
  
  <div class="center">
    <div id="quicksortAV_iframe"></div>
  </div>
</div>
<p>Here is a complete proficiency exercise to see how well you understand
Quicksort.</p>
<div
    id="quicksortPRO"
    class="embedContainer"
    data-exer-name="quicksortPRO"
    data-long-name="Quicksort Proficiency Exercise"
    data-short-name="quicksortPRO"
    data-frame-src="../../../AV/Sorting/quicksortPRO.html?localMode=true&amp;module=Quicksort&amp;selfLoggingEnabled=false&amp;JXOP-debug=true&amp;JOP-lang=en&amp;JXOP-code=pseudo&amp;JXOP-feedback=continuous&amp;JXOP-fixmode=fix"
    data-frame-width="950"
    data-frame-height="650"
    data-vertical-scrolling="no"
    data-external="false"
    data-points="1.0"
    data-required="True"
    data-showhide="show"
    data-threshold="0.9"
    data-type="pe"
    data-exer-id="">
  
  <div class="center">
    <div id="quicksortPRO_iframe"></div>
  </div>
</div>
</div>
<div class="section" id="quicksort-analysis">
<h2>2.<span class="section-number">12.4. </span>Quicksort Analysis<a class="headerlink" href="#quicksort-analysis" title="Permalink to this headline">¶</a></h2>
<p>This visualization explains the worst-case running time of Quick Sort</p>
<div id="QuickSortWorstCaseCON" class="ssAV" data-points="0.0" data-threshold="1.0" data-type="ss" data-required="False" data-short-name="QuickSortWorstCaseCON" data-long-name="Quicksort Worst Case Analysis Slideshow" data-exer-id="" alt="Quicksort Worst Case Analysis Slideshow" tabIndex="-1">
 <span class="jsavcounter"></span>
 <a class="jsavsettings" href="#">Settings</a>
 <div class="jsavcontrols"></div>
 <p class="jsavoutput jsavline"></p>
 <div class="jsavcanvas"></div>
 <div class="prof_indicators">
  <img id="QuickSortWorstCaseCON_check_mark" class="prof_check_mark" src="_static/Images/green_check.png" alt="Proficient" />
  <span id="QuickSortWorstCaseCON_cm_saving_msg" class="cm_saving_msg">Saving...</span>
  <span id="QuickSortWorstCaseCON_cm_error_msg" class="cm_error_msg">
   <img id="QuickSortWorstCaseCON_cm_warning_icon" class="cm_warning_icon" src="_static/Images/warning.png" alt="Error Saving" /><br />
   Server Error<br />
   <a href="#" class="resubmit_link">Resubmit</a>
  </span>
 </div>
</div>
<p></p>
<p>This is terrible, no better than Bubble Sort.
When will this worst case occur?
Only when each pivot yields a bad partitioning of the array.
If the pivot values are selected at random, then this is extremely
unlikely to happen.
When selecting the middle position of the current subarray, it is
still unlikely to happen.
It does not take many good partitionings for Quicksort to
work fairly well.</p>
<p>This visualization explains the best-case running time of Quick Sort</p>
<div id="QuickSortBestCaseCON" class="ssAV" data-points="0.0" data-threshold="1.0" data-type="ss" data-required="False" data-short-name="QuickSortBestCaseCON" data-long-name="Quicksort Best Case Analysis Slideshow" data-exer-id="" alt="Quicksort Best Case Analysis Slideshow" tabIndex="-1">
 <span class="jsavcounter"></span>
 <a class="jsavsettings" href="#">Settings</a>
 <div class="jsavcontrols"></div>
 <p class="jsavoutput jsavline"></p>
 <div class="jsavcanvas"></div>
 <div class="prof_indicators">
  <img id="QuickSortBestCaseCON_check_mark" class="prof_check_mark" src="_static/Images/green_check.png" alt="Proficient" />
  <span id="QuickSortBestCaseCON_cm_saving_msg" class="cm_saving_msg">Saving...</span>
  <span id="QuickSortBestCaseCON_cm_error_msg" class="cm_error_msg">
   <img id="QuickSortBestCaseCON_cm_warning_icon" class="cm_warning_icon" src="_static/Images/warning.png" alt="Error Saving" /><br />
   Server Error<br />
   <a href="#" class="resubmit_link">Resubmit</a>
  </span>
 </div>
</div>
<p></p>
<p>Quicksort’s average-case behavior falls somewhere
between the extremes of worst and best case.
Average-case analysis considers the cost for all possible arrangements
of input, summing the costs and dividing by the number of cases.
We make one reasonable simplifying assumption:
At each partition step, the pivot is
equally likely to end in any position in the (sorted) array.
In other words, the pivot is equally likely to break an array into
partitions of sizes 0 and <span class="math notranslate nohighlight">\(n-1\)</span>, or 1 and <span class="math notranslate nohighlight">\(n-2\)</span>, and so
on.</p>
<p>Given this assumption, the average-case cost is computed from the
following equation:</p>
<div class="math notranslate nohighlight">
\[{\bf T}(n) = cn + \frac{1}{n}\sum_{k=0}^{n-1}[{\bf T}(k) +
{\bf T}(n - 1 - k)],
\quad {\bf T}(0) = {\bf T}(1) = c.\]</div>
<p>This visualization will help you to understand how this recurrence
relation was formed.</p>
<div id="QuickSortAverageCaseCON" class="ssAV" data-points="0.0" data-threshold="1.0" data-type="ss" data-required="False" data-short-name="QuickSortAverageCaseCON" data-long-name="Quicksort Average Case Analysis Slideshow" data-exer-id="" alt="Quicksort Average Case Analysis Slideshow" tabIndex="-1">
 <span class="jsavcounter"></span>
 <a class="jsavsettings" href="#">Settings</a>
 <div class="jsavcontrols"></div>
 <p class="jsavoutput jsavline"></p>
 <div class="jsavcanvas"></div>
 <div class="prof_indicators">
  <img id="QuickSortAverageCaseCON_check_mark" class="prof_check_mark" src="_static/Images/green_check.png" alt="Proficient" />
  <span id="QuickSortAverageCaseCON_cm_saving_msg" class="cm_saving_msg">Saving...</span>
  <span id="QuickSortAverageCaseCON_cm_error_msg" class="cm_error_msg">
   <img id="QuickSortAverageCaseCON_cm_warning_icon" class="cm_warning_icon" src="_static/Images/warning.png" alt="Error Saving" /><br />
   Server Error<br />
   <a href="#" class="resubmit_link">Resubmit</a>
  </span>
 </div>
</div>
<p></p>
<p>This is an unusual situation that the average case cost and the worst
case cost have asymptotically different growth rates.
Consider what “average case” actually means.
We compute an average cost for inputs of size <span class="math notranslate nohighlight">\(n\)</span> by summing up
for every possible input of size <span class="math notranslate nohighlight">\(n\)</span> the product of the running
time cost of that input times the probability that that input will
occur.
To simplify things, we assumed that every permutation is equally
likely to occur.
Thus, finding the average means summing up the cost for every
permutation and dividing by the number of permutations
(which is <span class="math notranslate nohighlight">\(n!\)</span>).
We know that some of these <span class="math notranslate nohighlight">\(n!\)</span> inputs cost <span class="math notranslate nohighlight">\(O(n^2)\)</span>.
But the sum of all the permutation costs has to be
<span class="math notranslate nohighlight">\((n!)(O(n \log n))\)</span>.
Given the extremely high cost of the worst inputs, there must be
very few of them.
In fact, there cannot be a constant fraction of the inputs with cost
<span class="math notranslate nohighlight">\(O(n^2)\)</span>.
If even, say, 1% of the inputs have cost <span class="math notranslate nohighlight">\(O(n^2)\)</span>, this would
lead to an average cost of <span class="math notranslate nohighlight">\(O(n^2)\)</span>.
Thus, as <span class="math notranslate nohighlight">\(n\)</span> grows, the fraction of inputs with high cost must
be going toward a limit of zero.
We can conclude that Quicksort will run fast if
we can avoid those very few bad input permutations.
This is why picking a good pivot is so important.</p>
</div>
<div class="section" id="pivots-in-practice">
<h2>2.<span class="section-number">12.5. </span>Pivots in practice<a class="headerlink" href="#pivots-in-practice" title="Permalink to this headline">¶</a></h2>
<p>Perhaps the most important choice in implementing quicksort is how to
choose the pivot. Choosing a bad pivot can result in all elements of
the array ending up in the same partition, in which case quicksort
ends up taking quadratic time.</p>
<p>Choosing the <em>first</em> or the <em>last</em> element of the array is a bad
strategy. If the input array is sorted, then the first element of the
array will also be the smallest element. Hence all elements of the
array will end up in the “greater than pivot” partition. Worse, the
exact same thing will happen in all the recursive calls to quicksort.
Hence the partitioning will be as bad as possible, and quicksort will
end up taking quadratic time. You sometimes see implementations of
quicksort that use the first element as the pivot, but this is a bad
idea!</p>
<p>Above, we picked the <em>middle</em> element of the array, to avoid this
problem. This works well enough, but in practice, more sophisticated
strategies are used.</p>
<p>The theoretically best choice of pivot is one that divides the array
equally in two, i.e. the median element of the array. However, the
median of an array is difficult to compute (unless you sort the array
first!) Instead, many quicksort implementations use a strategy called
<em>median-of-three</em>. In median-of-three, we pick elements from three
positions in the array: the <em>first</em> position, the <em>middle</em> position
and the <em>last</em> position. Then we take the median of these three
elements. For example, given the array <code class="docutils literal notranslate"><span class="pre">3,</span> <span class="pre">1,</span> <span class="pre">4,</span> <span class="pre">1,</span> <span class="pre">5,</span> <span class="pre">9,</span> <span class="pre">2</span></code>, we
pick out the elements <code class="docutils literal notranslate"><span class="pre">3</span></code> (first position), <code class="docutils literal notranslate"><span class="pre">1</span></code> (middle position)
and <code class="docutils literal notranslate"><span class="pre">2</span></code> (last position). The median of 3, 1 and 2 is 2, so we pick 2
as the pivot.</p>
<p>Median-of-three is not guaranteed to pick a good pivot: there are
cases where it partitions the input array badly. However, these bad
cases do not seem to occur in practice. In practice, median-of-three
picks good pivots, and it is also cheap to implement. It is used by
most real-world quicksort implementations.</p>
<p>Another good approach is to pick a random element of the array as the
pivot. This makes it somewhat unlikely to get a poor partitioning.
What’s more, if we do get a poor partitioning, it is likely that in
the recursive call to <code class="docutils literal notranslate"><span class="pre">qsort</span></code>, we will choose a different pivot and
get a better partitioning. Unlike median-of-three, this approach is
theoretically sound: there are no input arrays which make it work
badly. Another way to get the same effect is to pick e.g. the first
element as the pivot, but to <em>shuffle</em> the array before sorting,
rearranging it into a random order. The array only needs to be
shuffled once before quicksort begins, not in every recursive call.</p>
</div>
<div class="section" id="more-practical-improvements">
<h2>2.<span class="section-number">12.6. </span>More practical improvements<a class="headerlink" href="#more-practical-improvements" title="Permalink to this headline">¶</a></h2>
<p>A significant improvement can be gained by recognizing that
Quicksort is relatively slow when <span class="math notranslate nohighlight">\(n\)</span> is small.
This might not seem to be relevant if most of the time we sort
large arrays, nor should it matter how long Quicksort takes in the
rare instance when a small array is sorted because it will be fast
anyway.
But you should notice that Quicksort itself sorts many, many small
arrays!
This happens as a natural by-product of the divide and conquer
approach.</p>
<p>A simple improvement might then be to replace Quicksort with a faster
sort for small subarrays, say Insertion Sort or Selection Sort.
However, there is an even better—and still simpler—optimization.
When Quicksort partitions are below a certain size, do nothing!
The values within that partition will be out of order.
However, we do know that all values in the array to the left of the
partition are smaller than all values in the partition.
All values in the array to the right of the partition are greater than
all values in the partition.
Thus, even if Quicksort only gets the values to
“nearly” the right locations, the array will be close to sorted.
This is an ideal situation in which to take advantage of the best-case
performance of Insertion Sort.
The final step is a single call to Insertion Sort to process the
entire array, putting the records into final sorted order.
At what size should we switch to Insertion Sort? The answer can only
be determined by empirical testing, but on modern machines the answer
is probably somewhere between 10 and 100.</p>
<p>The last speedup to be considered reduces the cost of making
recursive calls.
Quicksort is inherently recursive, because each Quicksort operation
must sort two sublists.
Thus, there is no simple way to turn Quicksort into an iterative
algorithm.
However, Quicksort can be implemented using a stack
to imitate recursion, as the amount of information that must
be stored is small.
We need not store copies of a subarray, only the subarray bounds.
Furthermore, the stack depth can be kept small if care is taken on
the order in which Quicksort’s recursive calls are executed.
We can also place the code for <code class="docutils literal notranslate"><span class="pre">findpivot</span></code> and
<code class="docutils literal notranslate"><span class="pre">partition</span></code> inline to eliminate the remaining function
calls.
Note however that by not processing smal sublists of size nine or
less as suggested above, most of the function calls
will already have been eliminated.
Thus, eliminating the remaining function calls will yield only a
modest speedup.</p>
<div
    id="QuicksortSumm"
    class="embedContainer"
    data-exer-name="QuicksortSumm"
    data-long-name="Quicksort Summary Exercise"
    data-short-name="QuicksortSumm"
    data-frame-src="../../../Exercises/Sorting/QuicksortSumm.html?localMode=true&amp;module=Quicksort&amp;selfLoggingEnabled=false&amp;JXOP-debug=true&amp;JOP-lang=en&amp;JXOP-code=pseudo"
    data-frame-width="950"
    data-frame-height="650"
    data-vertical-scrolling="no"
    data-external="false"
    data-points="1.0"
    data-required="True"
    data-showhide="show"
    data-threshold="5"
    data-type="ka"
    data-exer-id="">
  
  <div class="center">
    <div id="QuicksortSumm_iframe"></div>
  </div>
</div>
<script type="text/javascript" src="../../../AV/Sorting/quicksortCODE.js"></script>
<script type="text/javascript" src="../../../AV/Sorting/quicksortCON.js"></script>
<script type="text/javascript" src="../../../AV/Sorting/QuickSortPartitionAnalysisCON.js"></script>
<script type="text/javascript" src="../../../AV/Sorting/QuickSortWorstCaseCON.js"></script>
<script type="text/javascript" src="../../../AV/Sorting/QuickSortBestCaseCON.js"></script>
<script type="text/javascript" src="../../../AV/Sorting/QuickSortAverageCaseCON.js"></script>
</div>
</div>


      </div>
      <div class="bottomnav">
      <p><span class="email_div" style="display:inline;"><a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a><a style="float:left;color:blue;" rel="nofollow" href="../../../lib/Privacy.html" target="_blank">| Privacy |</a> <a style="float:left;color:blue;" rel="nofollow" href="../../../lib/license.html" target="_blank">| License</a></span>&#160;&#160;
      
        «&#160;&#160;<a id="prevmod1" href="MergesortImpl.html">2.<span class="section-number">11. </span>Implementing Mergesort</a>
        &#160;&#160;::&#160;&#160;
        <a  class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a  id="nextmod1" href="SortingEmpirical.html">2.<span class="section-number">13. </span>An Empirical Comparison of Sorting Algorithms</a>&#160;&#160;»

</p>
      </div>
      <img style="float:right;" src="_static/nsf1.gif" height="62" width="62" alt="nsf"/>


    <div class="footer">
      <p>
        <span class="email_div" style="display:inline;">
          <a id="contact_us" class="contact" style="float:left;color:blue;" rel="nofollow" href="mailto:">Contact Us |</a>
          <a id="bugreport-link" style="float:left;color:blue;" class="bugreport-link" href="#">| Report a bug</a>
        </span>
      </p>
        &copy; Copyright 2016 by OpenDSA Project Contributors and distributed under an MIT license.
      Last updated on Nov 03, 2021.
      Created using <a target="_blank" href="http://sphinx.pocoo.org/">Sphinx</a> 2.4.4.
    </div>
    
<div id="bugreport-box" class="bugreport-popup ">
  <a href="#" class="close"><img src="_static/Images/close_pop.png" class="btn_close" title="Close Window" alt="Close Window" /></a>
  <form method="post" class="report" action="https://#">
    <fieldset class="textbox">
      <div id="bug_error" class="error"></div>
      <label>
        <span>Summary*:</span>
        <input type="text" id="b_title" placeholder="Summary" />
      </label>

      <label class="os">
        <span>Operating system*:</span>
        <select id="b_os">
          <option value="windows">Windows</option>
          <option value="macos">Mac OS</option>
          <option value="linux">Linux</option>
          <option value="ios">iOS</option>
          <option value="android">Android</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="browser">
        <span>Browser*:</span>
        <select id="b_browser">
          <option value="chrome">Chrome</option>
          <option value="safari">Safari</option>
          <option value="internetexplorer">Internet Explorer</option>
          <option value="opera">Opera</option>
          <option value="other">Other</option>
        </select>
      </label>

      <label class="description">
        <span>Description*:</span><br>
        <textarea id="b_description" rows="5" cols="25" placeholder="***BUG** Please enter: (1) a consice description of the problem. (2) steps to reproduce bug. (3) the version of your browser and operating system."></textarea>
      </label>

      <label class="screenshot">
        <span>Attach a screenshot (optional):</span>
        <input type="file" id="b_screenshot" accept="image/*" placeholder="Attach a screenshot (optional)">
      </label>

      <p>
        <input type="submit" id="bug-submit-button" value="Submit &rarr;"/>
      </p>
    </fieldset>
  </form>
</div>

  </body>
</html>